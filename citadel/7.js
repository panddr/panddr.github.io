webpackJsonp([7],{1507:function(e,t,a){"use strict";function n(e){function t(){l.add(e,"ps-focus")}function a(){l.remove(e,"ps-focus")}var n=this;n.settings=i.clone(c),n.containerWidth=null,n.containerHeight=null,n.contentWidth=null,n.contentHeight=null,n.isRtl="rtl"===u.css(e,"direction"),n.isNegativeScroll=function(){var t=e.scrollLeft,a=null;return e.scrollLeft=-1,a=e.scrollLeft<0,e.scrollLeft=t,a}(),n.negativeScrollAdjustment=n.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.event=new p,n.ownerDocument=e.ownerDocument||document,n.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),n.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),n.scrollbarXRail),n.scrollbarX.setAttribute("tabindex",0),n.event.bind(n.scrollbarX,"focus",t),n.event.bind(n.scrollbarX,"blur",a),n.scrollbarXActive=null,n.scrollbarXWidth=null,n.scrollbarXLeft=null,n.scrollbarXBottom=i.toInt(u.css(n.scrollbarXRail,"bottom")),n.isScrollbarXUsingBottom=n.scrollbarXBottom===n.scrollbarXBottom,n.scrollbarXTop=n.isScrollbarXUsingBottom?null:i.toInt(u.css(n.scrollbarXRail,"top")),n.railBorderXWidth=i.toInt(u.css(n.scrollbarXRail,"borderLeftWidth"))+i.toInt(u.css(n.scrollbarXRail,"borderRightWidth")),u.css(n.scrollbarXRail,"display","block"),n.railXMarginWidth=i.toInt(u.css(n.scrollbarXRail,"marginLeft"))+i.toInt(u.css(n.scrollbarXRail,"marginRight")),u.css(n.scrollbarXRail,"display",""),n.railXWidth=null,n.railXRatio=null,n.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),n.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),n.scrollbarYRail),n.scrollbarY.setAttribute("tabindex",0),n.event.bind(n.scrollbarY,"focus",t),n.event.bind(n.scrollbarY,"blur",a),n.scrollbarYActive=null,n.scrollbarYHeight=null,n.scrollbarYTop=null,n.scrollbarYRight=i.toInt(u.css(n.scrollbarYRail,"right")),n.isScrollbarYUsingRight=n.scrollbarYRight===n.scrollbarYRight,n.scrollbarYLeft=n.isScrollbarYUsingRight?null:i.toInt(u.css(n.scrollbarYRail,"left")),n.scrollbarYOuterWidth=n.isRtl?i.outerWidth(n.scrollbarY):null,n.railBorderYWidth=i.toInt(u.css(n.scrollbarYRail,"borderTopWidth"))+i.toInt(u.css(n.scrollbarYRail,"borderBottomWidth")),u.css(n.scrollbarYRail,"display","block"),n.railYMarginHeight=i.toInt(u.css(n.scrollbarYRail,"marginTop"))+i.toInt(u.css(n.scrollbarYRail,"marginBottom")),u.css(n.scrollbarYRail,"display",""),n.railYHeight=null,n.railYRatio=null}function r(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function s(e){e.removeAttribute("data-ps-id")}var i=a(1508),l=a(1512),c=a(1523),u=a(1511),p=a(1524),d=a(1525),m={};t.add=function(e){var t=d();return o(e,t),m[t]=new n(e),m[t]},t.remove=function(e){delete m[r(e)],s(e)},t.get=function(e){return m[r(e)]}},1508:function(e,t,a){"use strict";var n=a(1512),r=a(1511),o=t.toInt=function(e){return parseInt(e,10)||0},s=t.clone=function(e){if(e){if(e.constructor===Array)return e.map(s);if("object"==typeof e){var t={};for(var a in e)t[a]=s(e[a]);return t}return e}return null};t.extend=function(e,t){var a=s(e);for(var n in t)a[n]=s(t[n]);return a},t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=n.list(e),a=0;a<t.length;a++){var r=t[a];0===r.indexOf("ps-")&&n.remove(e,r)}},t.outerWidth=function(e){return o(r.css(e,"width"))+o(r.css(e,"paddingLeft"))+o(r.css(e,"paddingRight"))+o(r.css(e,"borderLeftWidth"))+o(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){n.add(e,"ps-in-scrolling"),void 0!==t?n.add(e,"ps-"+t):(n.add(e,"ps-x"),n.add(e,"ps-y"))},t.stopScrolling=function(e,t){n.remove(e,"ps-in-scrolling"),void 0!==t?n.remove(e,"ps-"+t):(n.remove(e,"ps-x"),n.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1509:function(e,t,a){"use strict";function n(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function r(e,t){var a={width:t.railXWidth};t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:a.left=e.scrollLeft,t.isScrollbarXUsingBottom?a.bottom=t.scrollbarXBottom-e.scrollTop:a.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,a);var n={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?n.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:n.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:n.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,n),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=a(1508),s=a(1512),i=a(1511),l=a(1507),c=a(1510);e.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var a;e.contains(t.scrollbarXRail)||(a=i.queryChildren(e,".ps-scrollbar-x-rail"),a.length>0&&a.forEach(function(e){i.remove(e)}),i.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(a=i.queryChildren(e,".ps-scrollbar-y-rail"),a.length>0&&a.forEach(function(e){i.remove(e)}),i.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=n(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=n(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),r(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},1510:function(e,t,a){"use strict";var n,r,o=a(1507),s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,a){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===a)throw"You must provide a value to the update-scroll function";"top"===t&&a<=0&&(e.scrollTop=a=0,e.dispatchEvent(s("ps-y-reach-start"))),"left"===t&&a<=0&&(e.scrollLeft=a=0,e.dispatchEvent(s("ps-x-reach-start")));var i=o.get(e);"top"===t&&a>=i.contentHeight-i.containerHeight&&(a=i.contentHeight-i.containerHeight,a-e.scrollTop<=1?a=e.scrollTop:e.scrollTop=a,e.dispatchEvent(s("ps-y-reach-end"))),"left"===t&&a>=i.contentWidth-i.containerWidth&&(a=i.contentWidth-i.containerWidth,a-e.scrollLeft<=1?a=e.scrollLeft:e.scrollLeft=a,e.dispatchEvent(s("ps-x-reach-end"))),n||(n=e.scrollTop),r||(r=e.scrollLeft),"top"===t&&a<n&&e.dispatchEvent(s("ps-scroll-up")),"top"===t&&a>n&&e.dispatchEvent(s("ps-scroll-down")),"left"===t&&a<r&&e.dispatchEvent(s("ps-scroll-left")),"left"===t&&a>r&&e.dispatchEvent(s("ps-scroll-right")),"top"===t&&(e.scrollTop=n=a,e.dispatchEvent(s("ps-scroll-y"))),"left"===t&&(e.scrollLeft=r=a,e.dispatchEvent(s("ps-scroll-x")))}},1511:function(e,t,a){"use strict";function n(e,t){return window.getComputedStyle(e)[t]}function r(e,t,a){return"number"==typeof a&&(a=a.toString()+"px"),e.style[t]=a,e}function o(e,t){for(var a in t){var n=t[a];"number"==typeof n&&(n=n.toString()+"px"),e.style[a]=n}return e}var s={};s.e=function(e,t){var a=document.createElement(e);return a.className=t,a},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,a){return"object"==typeof t?o(e,t):void 0===a?n(e,t):r(e,t,a)},s.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},e.exports=s},1512:function(e,t,a){"use strict";function n(e,t){var a=e.className.split(" ");a.indexOf(t)<0&&a.push(t),e.className=a.join(" ")}function r(e,t){var a=e.className.split(" "),n=a.indexOf(t);n>=0&&a.splice(n,1),e.className=a.join(" ")}t.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):r(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},1513:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"b",function(){return v}),a.d(t,"a",function(){return g});var i=a(1),l=a.n(i),c=a(3),u=a.n(c),p=a(29),d=a.n(p),m=a(26),h=(a.n(m),a(27)),f=a(38),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),g=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,r=e.title,o=e.className,s=e.disabled,i=d()({"is-active":t},o);return this.props.collapsed?l.a.createElement("option",{value:a,"data-is-link-to":this.props.isLinkTo},"string"==typeof r&&r.indexOf(".")>0?l.a.createElement(u.a,{className:"tab-title",content:r}):l.a.createElement("span",{className:"tab-title"},r)):l.a.createElement("li",{className:i,onClick:s?null:n.bind(this,a,this.props.isLinkTo)},l.a.createElement("a",null,"string"==typeof r&&r.indexOf(".")>0?l.a.createElement(u.a,{className:"tab-title",content:r}):l.a.createElement("span",{className:"tab-title"},r),this.props.subText?l.a.createElement("div",{className:"tab-subtext"},this.props.subText):null))}}]),t}(l.a.Component);g.propTypes={changeTab:i.PropTypes.func,isActive:i.PropTypes.bool.isRequired,index:i.PropTypes.number.isRequired,className:i.PropTypes.string,isLinkTo:i.PropTypes.string},g.defaultProps={isActive:!1,index:0,className:"",isLinkTo:""};var v=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return s(t,e),b(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e,t){if(e!==this.state.activeTab){if(""!==t)return void this.context.router.push(t);this.props.setting&&h.a.changeViewSetting(n({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,r=t.tabsClass,o=t.style,s=t.segmented,i=this.state.width<900&&l.a.Children.count(a)>2,c=null,u=[],p=l.a.Children.map(a,function(t,a){if(!t)return null;if(i&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(c=t.props.children),l.a.cloneElement(t,{collapsed:i,isActive:n,changeTab:e._changeTab.bind(e),index:a})}).filter(function(e){return e&&u.push(e.props.index),null!==e});return c||(c=p[0].props.children),l.a.createElement("div",{className:d()(this.props.actionButtons?"with-buttons":"",this.props.className)},l.a.createElement("div",{className:"service-selector"},l.a.createElement("ul",{style:o,className:d()("button-group no-margin",r,{segmented:s})},i?l.a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},l.a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes["data-is-link-to"].value)}},p)):p,this.props.actionButtons?l.a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),l.a.createElement("div",{className:n+" tab-content"},c))}}]),t}(l.a.Component);v.propTypes={setting:i.PropTypes.string,defaultActiveTab:i.PropTypes.number,segmented:i.PropTypes.bool},v.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},v.contextTypes={router:l.a.PropTypes.object.isRequired},v=Object(m.connect)(v,{listenTo:function(){return[f.a]},getProps:function(){return{viewSettings:f.a.getState().viewSettings}}})},1514:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},1515:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="transition"+e+"Timeout",a="transition"+e;return function(e){if(e[a]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=r;var o=a(1),s=(n(o),a(19)),i=n(s);t.nameShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,leave:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterActive:i.default.string,leave:i.default.string,leaveActive:i.default.string,appear:i.default.string,appearActive:i.default.string})])},1516:function(e,t,a){"use strict";e.exports=a(1521)},1520:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(1),i=a.n(s),l=a(1535),c=a.n(l),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?i.a.createElement(c.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):i.a.createElement(this.props.component)}}]),t}(i.a.Component);p.defaultProps={component:"span",enterTimeout:2e3},t.a=p},1521:function(e,t,a){"use strict";var n=a(1522),r=a(1526),o=a(1534);e.exports={initialize:r,update:o,destroy:n}},1522:function(e,t,a){"use strict";var n=a(1508),r=a(1511),o=a(1507);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),r.remove(t.scrollbarX),r.remove(t.scrollbarY),r.remove(t.scrollbarXRail),r.remove(t.scrollbarYRail),n.removePsClasses(e),o.remove(e))}},1523:function(e,t,a){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1524:function(e,t,a){"use strict";var n=function(e){this.element=e,this.events={}};n.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},n.prototype.unbind=function(e,t){var a=void 0!==t;this.events[e]=this.events[e].filter(function(n){return!(!a||n===t)||(this.element.removeEventListener(e,n,!1),!1)},this)},n.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new n(e),this.eventElements.push(t)),t},r.prototype.bind=function(e,t,a){this.eventElement(e).bind(t,a)},r.prototype.unbind=function(e,t,a){this.eventElement(e).unbind(t,a)},r.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},r.prototype.once=function(e,t,a){var n=this.eventElement(e),r=function(e){n.unbind(t,r),a(e)};n.bind(t,r)},e.exports=r},1525:function(e,t,a){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},1526:function(e,t,a){"use strict";var n=a(1508),r=a(1512),o=a(1507),s=a(1509),i={"click-rail":a(1527),"drag-scrollbar":a(1528),keyboard:a(1529),wheel:a(1530),touch:a(1531),selection:a(1532)},l=a(1533);e.exports=function(e,t){t="object"==typeof t?t:{},r.add(e,"ps-container");var a=o.add(e);a.settings=n.extend(a.settings,t),r.add(e,"ps-theme-"+a.settings.theme),a.settings.handlers.forEach(function(t){i[t](e)}),l(e),s(e)}},1527:function(e,t,a){"use strict";function n(e,t){function a(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var r=n.pageY-window.pageYOffset-a(t.scrollbarYRail).top,i=r>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+i*t.containerHeight),o(e),n.stopPropagation()}),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var r=n.pageX-window.pageXOffset-a(t.scrollbarXRail).left,i=r>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+i*t.containerWidth),o(e),n.stopPropagation()})}var r=a(1507),o=a(1509),s=a(1510);e.exports=function(e){n(e,r.get(e))}},1528:function(e,t,a){"use strict";function n(e,t){function a(a){var r=n+a*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=r<0?0:r>s?s:r;var i=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",i)}var n=null,r=null,i=function(t){a(t.pageX-r),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarX,"mousedown",function(a){r=a.pageX,n=o.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",u),a.stopPropagation(),a.preventDefault()})}function r(e,t){function a(a){var r=n+a*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=r<0?0:r>s?s:r;var i=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",i)}var n=null,r=null,i=function(t){a(t.pageY-r),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarY,"mousedown",function(a){r=a.pageY,n=o.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",u),a.stopPropagation(),a.preventDefault()})}var o=a(1508),s=a(1511),i=a(1507),l=a(1509),c=a(1510);e.exports=function(e){var t=i.get(e);n(e,t),r(e,t)}},1529:function(e,t,a){"use strict";function n(e,t){function a(a,n){var r=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===o&&a<0||o>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(n||u){var p=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(p){if("IFRAME"===p.tagName)p=p.contentDocument.activeElement;else for(;p.shadowRoot;)p=p.shadowRoot.activeElement;if(r.isEditable(p))return}var d=0,m=0;switch(c.which){case 37:d=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:m=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:d=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:m=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:m=90;break;case 32:m=c.shiftKey?90:-90;break;case 34:m=-90;break;case 35:m=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:m=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-m),l(e,"left",e.scrollLeft+d),i(e),s=a(d,m),s&&c.preventDefault()}}})}var r=a(1508),o=a(1511),s=a(1507),i=a(1509),l=a(1510);e.exports=function(e){n(e,s.get(e))}},1530:function(e,t,a){"use strict";function n(e,t){function a(a,n){var r=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===o&&a<0||o>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,a=-1*e.deltaY;return void 0!==t&&void 0!==a||(t=-1*e.wheelDeltaX/6,a=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,a*=10),t!==t&&a!==a&&(t=0,a=e.wheelDelta),e.shiftKey?[-a,-t]:[t,a]}function r(t,a){var n=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){if(n.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(n).overflow.match(/(scroll|auto)/))return!1;var r=n.scrollHeight-n.clientHeight;if(r>0&&!(0===n.scrollTop&&a>0||n.scrollTop===r&&a<0))return!0;var o=n.scrollLeft-n.clientWidth;if(o>0&&!(0===n.scrollLeft&&t<0||n.scrollLeft===o&&t>0))return!0}return!1}function i(i){var c=n(i),u=c[0],p=c[1];r(u,p)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?s(e,"top",e.scrollTop-p*t.settings.wheelSpeed):s(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-p*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),o(e),(l=l||a(u,p))&&(i.stopPropagation(),i.preventDefault()))}var l=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",i):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",i)}var r=a(1507),o=a(1509),s=a(1510);e.exports=function(e){n(e,r.get(e))}},1531:function(e,t,a){"use strict";function n(e,t,a,n){function r(a,n){var r=e.scrollTop,o=e.scrollLeft,s=Math.abs(a),i=Math.abs(n);if(i>s){if(n<0&&r===t.contentHeight-t.containerHeight||n>0&&0===r)return!t.settings.swipePropagation}else if(s>i&&(a<0&&o===t.contentWidth-t.containerWidth||a>0&&0===o))return!t.settings.swipePropagation;return!0}function l(t,a){i(e,"top",e.scrollTop-a),i(e,"left",e.scrollLeft-t),s(e)}function c(){y=!0}function u(){y=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function m(e){if(d(e)){E=!0;var t=p(e);b.pageX=t.pageX,b.pageY=t.pageY,g=(new Date).getTime(),null!==_&&clearInterval(_),e.stopPropagation()}}function h(e){if(!E&&t.settings.swipePropagation&&m(e),!y&&E&&d(e)){var a=p(e),n={pageX:a.pageX,pageY:a.pageY},o=n.pageX-b.pageX,s=n.pageY-b.pageY;l(o,s),b=n;var i=(new Date).getTime(),c=i-g;c>0&&(v.x=o/c,v.y=s/c,g=i),r(o,s)&&(e.stopPropagation(),e.preventDefault())}}function f(){!y&&E&&(E=!1,clearInterval(_),_=setInterval(function(){return o.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(_):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(_)},10))}var b={},g=0,v={},_=null,y=!1,E=!1;a?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",m),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",f)):n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",m),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",m),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",f)))}var r=a(1508),o=a(1507),s=a(1509),i=a(1510);e.exports=function(e){if(r.env.supportsTouch||r.env.supportsIePointer){n(e,o.get(e),r.env.supportsTouch,r.env.supportsIePointer)}}},1532:function(e,t,a){"use strict";function n(e,t){function a(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function n(){c||(c=setInterval(function(){if(!o.get(e))return void clearInterval(c);i(e,"top",e.scrollTop+u.top),i(e,"left",e.scrollLeft+u.left),s(e)},50))}function l(){c&&(clearInterval(c),c=null),r.stopScrolling(e)}var c=null,u={top:0,left:0},p=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(a())?p=!0:(p=!1,l())}),t.event.bind(window,"mouseup",function(){p&&(p=!1,l())}),t.event.bind(window,"keyup",function(){p&&(p=!1,l())}),t.event.bind(window,"mousemove",function(t){if(p){var a={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};a.x<o.left+3?(u.left=-5,r.startScrolling(e,"x")):a.x>o.right-3?(u.left=5,r.startScrolling(e,"x")):u.left=0,a.y<o.top+3?(u.top=o.top+3-a.y<5?-5:-20,r.startScrolling(e,"y")):a.y>o.bottom-3?(u.top=a.y-o.bottom+3<5?5:20,r.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():n()}})}var r=a(1508),o=a(1507),s=a(1509),i=a(1510);e.exports=function(e){n(e,o.get(e))}},1533:function(e,t,a){"use strict";function n(e,t){t.event.bind(e,"scroll",function(){o(e)})}var r=a(1507),o=a(1509);e.exports=function(e){n(e,r.get(e))}},1534:function(e,t,a){"use strict";var n=a(1508),r=a(1511),o=a(1507),s=a(1509),i=a(1510);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.css(t.scrollbarXRail,"display","block"),r.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=n.toInt(r.css(t.scrollbarXRail,"marginLeft"))+n.toInt(r.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=n.toInt(r.css(t.scrollbarYRail,"marginTop"))+n.toInt(r.css(t.scrollbarYRail,"marginBottom")),r.css(t.scrollbarXRail,"display","none"),r.css(t.scrollbarYRail,"display","none"),s(e),i(e,"top",e.scrollTop),i(e,"left",e.scrollLeft),r.css(t.scrollbarXRail,"display",""),r.css(t.scrollbarYRail,"display",""))}},1535:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(1),c=n(l),u=a(19),p=n(u),d=a(1536),m=n(d),h=a(1539),f=n(h),b=a(1515),g=(b.nameShape.isRequired,p.default.bool,p.default.bool,p.default.bool,(0,b.transitionTimeout)("Appear"),(0,b.transitionTimeout)("Enter"),(0,b.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),v=function(e){function t(){var a,n,s;r(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=n=o(this,e.call.apply(e,[this].concat(l))),n._wrapChild=function(e){return c.default.createElement(f.default,{name:n.props.transitionName,appear:n.props.transitionAppear,enter:n.props.transitionEnter,leave:n.props.transitionLeave,appearTimeout:n.props.transitionAppearTimeout,enterTimeout:n.props.transitionEnterTimeout,leaveTimeout:n.props.transitionLeaveTimeout},e)},s=a,o(n,s)}return s(t,e),t.prototype.render=function(){return c.default.createElement(m.default,i({},this.props,{childFactory:this._wrapChild}))},t}(c.default.Component);v.displayName="CSSTransitionGroup",v.propTypes={},v.defaultProps=g,t.default=v,e.exports=t.default},1536:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(1537),c=n(l),u=a(1),p=n(u),d=a(19),m=n(d),h=a(81),f=(n(h),a(1538)),b=(m.default.any,m.default.func,m.default.node,{component:"span",childFactory:function(e){return e}}),g=function(e){function t(a,n){r(this,t);var s=o(this,e.call(this,a,n));return s.performAppear=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(s._handleDoneAppearing.bind(s,e,t)):s._handleDoneAppearing(e,t)},s._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete s.currentlyTransitioningKeys[e];var a=(0,f.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)||s.performLeave(e,t)},s.performEnter=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(s._handleDoneEntering.bind(s,e,t)):s._handleDoneEntering(e,t)},s._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete s.currentlyTransitioningKeys[e];var a=(0,f.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)||s.performLeave(e,t)},s.performLeave=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(s._handleDoneLeaving.bind(s,e,t)):s._handleDoneLeaving(e,t)},s._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete s.currentlyTransitioningKeys[e];var a=(0,f.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)?s.keysToEnter.push(e):s.setState(function(t){var a=i({},t.children);return delete a[e],{children:a}})},s.childRefs=Object.create(null),s.state={children:(0,f.getChildMapping)(a.children)},s}return s(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,f.getChildMapping)(e.children),a=this.state.children;this.setState({children:(0,f.mergeChildMappings)(a,t)});for(var n in t){var r=a&&a.hasOwnProperty(n);!t[n]||r||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(var o in a){var s=t&&t.hasOwnProperty(o);!a[o]||s||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var a=this.keysToLeave;this.keysToLeave=[],a.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[];for(var a in this.state.children)!function(a){var n=e.state.children[a];if(n){var r="string"!=typeof n.ref,o=e.props.childFactory(n),s=function(t){e.childRefs[a]=t};o===n&&r&&(s=(0,c.default)(n.ref,s)),t.push(p.default.cloneElement(o,{key:a,ref:s}))}}(a);var n=i({},this.props);return delete n.transitionLeave,delete n.transitionName,delete n.transitionAppear,delete n.transitionEnter,delete n.childFactory,delete n.transitionLeaveTimeout,delete n.transitionEnterTimeout,delete n.transitionAppearTimeout,delete n.component,p.default.createElement(this.props.component,n,t)},t}(p.default.Component);g.displayName="TransitionGroup",g.propTypes={},g.defaultProps=b,t.default=g,e.exports=t.default},1537:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],a=0;a<e;a++)t[a]=arguments[a];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},1538:function(e,t,a){"use strict";function n(e){if(!e)return e;var t={};return o.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function r(e,t){function a(a){return t.hasOwnProperty(a)?t[a]:e[a]}e=e||{},t=t||{};var n={},r=[];for(var o in e)t.hasOwnProperty(o)?r.length&&(n[o]=r,r=[]):r.push(o);var s=void 0,i={};for(var l in t){if(n.hasOwnProperty(l))for(s=0;s<n[l].length;s++){var c=n[l][s];i[n[l][s]]=a(c)}i[l]=a(l)}for(s=0;s<r.length;s++)i[r[s]]=a(r[s]);return i}t.__esModule=!0,t.getChildMapping=n,t.mergeChildMappings=r;var o=a(1)},1539:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return w.length?w.forEach(function(a){return e.addEventListener(a,t,!1)}):setTimeout(t,0),function(){w.length&&w.forEach(function(a){return e.removeEventListener(a,t,!1)})}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=a(1540),u=n(c),p=a(1542),d=n(p),m=a(1543),h=n(m),f=a(1544),b=a(1),g=n(b),v=a(19),_=n(v),y=a(80),E=a(1515),w=[];f.transitionEnd&&w.push(f.transitionEnd),f.animationEnd&&w.push(f.animationEnd);var k=(_.default.node,E.nameShape.isRequired,_.default.bool,_.default.bool,_.default.bool,_.default.number,_.default.number,_.default.number,function(e){function t(){var a,n,s;r(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return a=n=o(this,e.call.apply(e,[this].concat(l))),n.componentWillAppear=function(e){n.props.appear?n.transition("appear",e,n.props.appearTimeout):e()},n.componentWillEnter=function(e){n.props.enter?n.transition("enter",e,n.props.enterTimeout):e()},n.componentWillLeave=function(e){n.props.leave?n.transition("leave",e,n.props.leaveTimeout):e()},s=a,o(n,s)}return s(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,a){var n=(0,y.findDOMNode)(this);if(!n)return void(t&&t());var r=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||r+"-active",s=null,l=void 0;(0,u.default)(n,r),this.queueClassAndNode(o,n);var c=function(e){e&&e.target!==n||(clearTimeout(s),l&&l(),(0,d.default)(n,r),(0,d.default)(n,o),l&&l(),t&&t())};a?(s=setTimeout(c,a),this.transitionTimeouts.push(s)):f.transitionEnd&&(l=i(n,c))},t.prototype.queueClassAndNode=function(e,t){var a=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,h.default)(function(){return a.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,u.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,g.default.cloneElement(g.default.Children.only(this.props.children),e)},t}(g.default.Component));k.displayName="CSSTransitionGroupChild",k.propTypes={},t.default=k,e.exports=t.default},1540:function(e,t,a){"use strict";function n(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(1541),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},1541:function(e,t,a){"use strict";function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},1542:function(e,t,a){"use strict";function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}},1543:function(e,t,a){"use strict";function n(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-p)),n=setTimeout(e,a);return p=t,n}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1514),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=["","webkit","moz","o","ms"],i="clearTimeout",l=n,c=void 0,u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&s.some(function(e){var t=u(e,"request");if(t in window)return i=u(e,"cancel"),l=function(e){return window[t](e)}});var p=(new Date).getTime();c=function(e){return l(e)},c.cancel=function(e){window[i]&&"function"==typeof window[i]&&window[i](e)},t.default=c,e.exports=t.default},1544:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var n=a(1514),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o="transform",s=void 0,i=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,m=void 0,h=void 0,f=void 0,b=void 0;if(r.default){var g=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(t),n=void 0,r=void 0,o="",s=0;s<a.length;s++){var i=a[s];if(i+"TransitionProperty"in e){o="-"+i.toLowerCase(),n=t[i]("TransitionEnd"),r=t[i]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!r&&"animationName"in e&&(r="animationend"),e=null,{animationEnd:r,transitionEnd:n,prefix:o}}();s=g.prefix,t.transitionEnd=i=g.transitionEnd,t.animationEnd=l=g.animationEnd,t.transform=o=s+"-"+o,t.transitionProperty=c=s+"-transition-property",t.transitionDuration=u=s+"-transition-duration",t.transitionDelay=d=s+"-transition-delay",t.transitionTiming=p=s+"-transition-timing-function",t.animationName=m=s+"-animation-name",t.animationDuration=h=s+"-animation-duration",t.animationTiming=f=s+"-animation-delay",t.animationDelay=b=s+"-animation-timing-function"}t.transform=o,t.transitionProperty=c,t.transitionTiming=p,t.transitionDelay=d,t.transitionDuration=u,t.transitionEnd=i,t.animationName=m,t.animationDuration=h,t.animationTiming=f,t.animationDelay=b,t.animationEnd=l,t.default={transform:o,end:i,property:c,timing:p,delay:d,duration:u}},1547:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function i(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}a.d(t,"a",function(){return S}),a.d(t,"b",function(){return T});var l=a(1),c=a.n(l),u=a(3),p=a.n(u),d=a(283),m=(a.n(d),a(674)),h=a(34),f=a(32),b=a(16),g=a(4),v=a(1520),_=a(1516),y=a.n(_),E=a(7),w=a.n(E),k=a(56),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),A=g.c.operations,C={textAlign:"left"},N={textAlign:"right"},S=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},a}return o(t,e),O(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;y.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!b.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!b.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!b.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],r=this.props.accountsList[a];if(n&&r&&n.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container"),t=e.childNodes,a="",n=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=s.value,u=c.childNodes;""!==a&&(a+="\n"),a+=[i(u[0]),i(u[1]),i(u[2]),i(u[3])].join(",")}}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}var p=new Blob([a],{type:"text/csv;charset=utf-8"}),m=new Date;Object(d.saveAs)(p,"btshist-"+m.getFullYear()+"-"+("0"+(m.getMonth()+1)).slice(-2)+"-"+("0"+m.getDate()).slice(-2)+"-"+("0"+m.getHours()).slice(-2)+("0"+m.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var h=this.refs.transactions;y.a.update(h),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,a){var n=[],r=new Set,o=!0,s=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var p=u.get("history");p&&(n=n.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){s=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw i}}return t&&(n=n.filter(function(e){return e.op[0]===A[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case"asset_id":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,a=e.compactView,n=e.filter,r=e.customFilter,o=e.style,i=e.maxHeight,l=this.state,u=l.limit,d=l.headerHeight,h=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:n,r).sort(s),b=f.length;o=o||{},o.width="100%",o.height="100%";var g=null;g=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return c.a.createElement("option",{value:e,key:e},w.a.translate("transaction.trxTypes."+e))});var _=f.length?f.slice(0,u).map(function(e){return c.a.createElement(m.a,{style:C,key:e.id,op:e.op,result:e.result,block:e.block_num,current:h,hideFee:!0,inverted:!1,hideOpLabel:a})}):[c.a.createElement("tr",{key:"no_recent"},c.a.createElement("td",{colSpan:a?"2":"3"},c.a.createElement(p.a,{content:"operation.no_recent"})))];return _.push(c.a.createElement("tr",{className:"total-value",key:"total_value"},c.a.createElement("td",{className:"column-hide-tiny"}),c.a.createElement("td",{style:N},b>0?c.a.createElement("span",null,c.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":w.a.translate("transaction.csv_tip"),"data-place":"bottom"},c.a.createElement(k.a,{name:"excel",className:"icon-14px"}))):null),c.a.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&b>this.props.limit||u<b?c.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},c.a.createElement(k.a,{name:"chevron-down",className:"icon-14px"})):null))),c.a.createElement("div",{className:"recent-transactions no-overflow",style:o},c.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:c.a.createElement("div",{ref:"header"},c.a.createElement("div",{className:"block-content-header"},c.a.createElement("span",null,this.props.title?this.props.title:c.a.createElement(p.a,{content:"account.recent"})))),c.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:i-d},ref:"transactions"},c.a.createElement("table",{className:"table"+(a?" compact":"")+(this.props.dashboard?" dashboard-table table-hover":"")},c.a.createElement("thead",null,c.a.createElement("tr",null,a?null:c.a.createElement("th",{style:C,className:"column-hide-tiny"},this.props.showFilters?c.a.createElement("select",{"data-place":"left","data-tip":w.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"bts-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},g):null),c.a.createElement("th",{style:C},c.a.createElement(p.a,{content:"account.votes.info"})),c.a.createElement("th",null))),c.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},_))),b>0&&this.state.csvExport&&c.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},c.a.createElement("div",null,c.a.createElement("div",null,"DATE"),c.a.createElement("div",null,"OPERATION"),c.a.createElement("div",null,"MEMO"),c.a.createElement("div",null,"AMOUNT")),f.map(function(e){return c.a.createElement(m.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}(c.a.Component);S.propTypes={accountsList:h.a.ChainAccountsList.isRequired,compactView:c.a.PropTypes.bool,limit:c.a.PropTypes.number,maxHeight:c.a.PropTypes.number,fullHeight:c.a.PropTypes.bool,showFilters:c.a.PropTypes.bool},S.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},S=Object(f.a)(S,{keep_updating:!0});var T=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),O(t,[{key:"render",value:function(){return c.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}(c.a.Component);T.propTypes={asset:h.a.ChainAsset.isRequired,to:h.a.ChainAccount.isRequired,fromAccount:h.a.ChainAccount.isRequired},T.defaultProps={asset:"1.3.0"},T=Object(f.a)(T)},1553:function(e,t,a){"use strict";function n(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"b",function(){return C}),a.d(t,"a",function(){return N});var i=a(1),l=a.n(i),c=a(68),u=a(34),p=a(32),d=a(16),m=a(26),h=(a.n(m),a(276)),f=a(3),b=a.n(f),g=a(7),v=a.n(g),_=a(142),y=a.n(_),E=a(679),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),O=function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},A=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),k(t,[{key:"componentDidMount",value:function(){y.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,r=e.fullPrecision,o=e.marketStats,s=e.coreAsset,i=void 0,l=void 0,c=a.get("id"),u=a.get("symbol"),p=n.get("id"),m=n.get("symbol");if(r||(t=d.a.get_asset_amount(t,n)),s&&o){var h=s.get("symbol");i=o.get(u+"_"+h),l=o.get(m+"_"+h)}var f=d.a.convertPrice(l&&l.close?l.close:"1.3.0"===p||n.has("bitasset")?n:null,i&&i.close?i.close:"1.3.0"===c||a.has("bitasset")?a:null,p,c);return f?d.a.convertValue(f,t,n,a):null}},{key:"render",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,r=e.fullPrecision,o=a.get("id"),s=a.get("symbol");r||(t=d.a.get_asset_amount(t,n));var i=this.getValue();return i||0===i?l.a.createElement(c.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:i,asset:o,decimalOffset:-1!==s.indexOf("BTC")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get("precision"):a.get("precision")-2}):l.a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":v.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},l.a.createElement(b.a,{content:"account.no_price"}))}}]),t}(E.a);A.propTypes={toAsset:u.a.ChainAsset.isRequired,fromAsset:u.a.ChainAsset.isRequired,coreAsset:u.a.ChainAsset.isRequired},A.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},A=Object(p.a)(A,{keep_updating:!0});var C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),k(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=n(e,["refCallback"]);return l.a.createElement(A,w({},a,{ref:t}))}}]),t}(l.a.Component);C=Object(m.connect)(C,{listenTo:function(){return[h.a]},getProps:function(){return{marketStats:h.a.getState().allMarketStats}}});var N=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),k(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),a=Number(t?e.getIn(["balance","amount"]):e.get("balance")),n=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(a)?l.a.createElement("span",null,"--"):l.a.createElement(C,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:a,fromAsset:n,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}(l.a.Component);N.propTypes={balance:u.a.ChainObject.isRequired},N=Object(p.a)(N,{keep_updating:!0})},1560:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(1),i=a.n(s),l=a(16),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.preFormattedPrice,n=e.quote,r=e.base,o=(e.component,a||l.a.price_to_text(t,n,r));return o.full>=1?i.a.createElement("span",null,i.a.createElement("span",{className:"price-integer"},o.int,"."),o.dec?i.a.createElement("span",{className:"price-integer"},o.dec):null,o.trailing?i.a.createElement("span",{className:"price-decimal"},o.trailing):null):o.full>=.1?i.a.createElement("span",null,i.a.createElement("span",{className:"price-decimal"},o.int,"."),o.dec?i.a.createElement("span",{className:"price-integer"},o.dec):null,o.trailing?i.a.createElement("span",{className:"price-decimal"},o.trailing):null):i.a.createElement("span",null,i.a.createElement("span",{className:"price-decimal"},o.int,"."),o.dec?i.a.createElement("span",{className:"price-decimal"},o.dec):null,o.trailing?i.a.createElement("span",{className:"price-integer"},o.trailing):null)}}]),t}(i.a.Component);t.a=u},1580:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"a",function(){return w}),a.d(t,"b",function(){return y});var s=a(1),i=a.n(s),l=a(34),c=a(32),u=a(29),p=a.n(u),d=a(279),m=a(276),h=a(26),f=(a.n(h),a(16)),b=a(145),g=a(125),v=function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var o=g.a.getMarketID(e.base,e.quote),s=o.marketID,i=o.first,l=o.second;return a.state={marketID:s,first:i,second:l},a}return o(t,e),_(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!f.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!f.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketID),this.props.allMarketStats.get(this.state.marketID))||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")}},{key:"componentWillMount",value:function(){d.a.getMarketStats.defer(this.state.second,this.state.first),this.statsChecked=new Date,this.statsInterval=setInterval(d.a.getMarketStats.bind(this,this.state.second,this.state.first),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}}]),t}(i.a.Component),E=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e){return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props.allMarketStats,t=this.state.marketID,a=e.get(t),n=a&&a.price?a.price:null;return i.a.createElement("span",{className:p()("",this.props.className)},n?i.a.createElement(b.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):"n/a")}}]),t}(y);E.propTypes={quote:l.a.ChainAsset.isRequired,base:l.a.ChainAsset.isRequired},E=Object(c.a)(E);var w=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),_(t,[{key:"render",value:function(){return i.a.createElement(E,this.props)}}]),t}(i.a.Component);w=Object(h.connect)(w,{listenTo:function(){return[m.a]},getProps:function(){return{allMarketStats:m.a.getState().allMarketStats}}})},1581:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(1),i=a.n(s),l=a(122),c=(a.n(l),a(40)),u=a.n(c),p=a(104),d=a(144),m=a.n(d),h=a(3),f=a.n(h),b=a(34),g=a(32),v=a(68),_=a(16),y=a(29),E=a.n(y),w=a(672),k=a(671),O=a(278),A=a(25),C=a(145),N=a(7),S=a.n(N),T=a(673),P=a(18),x=a.n(P),j=a(4),R=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),D=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a._initialState(e),a}return o(t,e),R(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var a=_.a.get_asset_amount(t.debt,e.quote_asset),n=_.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:a?a.toString():null,collateral:n?n.toString():null,collateral_ratio:this._getCollateralRatio(a,n),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:a,collateral:n}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(_.a.are_equal_shallow(t,this.state)&&x.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&x.a.is(e.account,this.props.account)&&x.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.short_amount,n=t.collateral,r=t.collateral_ratio;if(e.account!==this.props.account||e.hasCallOrders!==this.props.hasCallOrders||e.quote_asset.get("id")!==this.props.quote_asset.get("id")){var o=this._initialState(e),s=!1;(a||n||r)&&(o.short_amount=a,o.collateral=n,o.collateral_ratio=r,s=!0),this.setState(o),s&&this._validateFields(o)}}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),u.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),a=e.amount.replace(/,/g,""),n={short_amount:a,collateral:(this.state.collateral_ratio*(a/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),a=this._getFeedPrice(),n=t/(this.state.short_amount/a),r=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(l.isFinite)(n)?n:this._getInitialCollateralRatio(this.props)};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),a=e.target.value,n={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*a).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:a};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_maximizeCollateral",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=_.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=Math.floor(Math.min(this.props.backing_balance.get("balance")/_.a.get_asset_precision(this.props.backing_asset)+t-10,this.state.short_amount/this._getFeedPrice()*1e3));this._onCollateralChange(new Object({amount:a.toString()}))}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),a=this.state.original_position,n=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-a.collateral>_.a.get_asset_amount(n.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=S.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=a.debt||e.collateral!=a.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=S.a.translate("borrow.errors.below",{mr:o}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=S.a.translate("borrow.errors.close",{mr:o}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=_.a.get_asset_precision(this.props.quote_asset.get("precision")),a=_.a.get_asset_precision(this.props.backing_asset.get("precision")),n=this._getCurrentPosition(this.props),r=O.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*a-n.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-n.debt,10),asset_id:this.props.quote_asset.get("id")}}),A.a.process_transaction(r,null,!0).catch(function(e){}),u.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var a in e.call_orders)e.call_orders.hasOwnProperty(a)&&e.call_orders[a]&&e.quote_asset.get("id")===e.call_orders[a].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[a].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/_.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote_asset,n=t.bitasset_balance,r=t.backing_asset,o=t.backing_balance,s=this.state,l=s.short_amount,c=s.collateral,u=s.collateral_ratio,p=s.errors,d=s.isValid,h=_.a.get_asset_precision(this.props.quote_asset.get("precision")),b=_.a.get_asset_precision(this.props.backing_asset.get("precision"));u&&!isNaN(u)&&u>0&&u<1e3||(u=0),n=n?n.toJS():{balance:0,id:null},o=o?o.toJS():{balance:0,id:null};var g=E()("form-group",{"has-error":p.collateral_balance}),y=E()("form-group",{"has-error":p.below_maintenance},{"has-warning":p.close_maintenance}),O=E()("button",{disabled:p.collateral_balance||!d},{success:d}),A=this._getCurrentPosition(this.props),N=o.id?j.b.getObject(o.id):null,S=N?N.get("balance"):0,P=parseInt(this.state.collateral*b-A.collateral,10),x=S-P,R=i.a.createElement("span",null,i.a.createElement(f.a,{component:"span",content:"transfer.available"}),": ",n.id?i.a.createElement(k.a,{balance:n.id}):i.a.createElement(v.a,{amount:0,asset:a.get("id")})),D=i.a.createElement("span",null,i.a.createElement(f.a,{component:"span",content:"transfer.available"}),": ",o.id?i.a.createElement(v.a,{amount:x,asset:r.get("id")}):i.a.createElement(v.a,{amount:0,asset:r.get("id")})),L=this._getFeedPrice(),q=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,I=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!I&&isNaN(L)?i.a.createElement("div",null,i.a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},i.a.createElement(f.a,{component:"h3",content:"borrow.no_valid",asset_symbol:a.get("symbol")})),i.a.createElement("div",{className:"grid-content button-group text-center no-overflow"},i.a.createElement(m.a,{close:this.props.modalId},i.a.createElement("div",{className:" button warning"},i.a.createElement(f.a,{content:"account.perm.cancel"}))))):i.a.createElement("div",null,i.a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},i.a.createElement(f.a,{component:"h3",content:"borrow.title",asset_symbol:a.get("symbol")}),i.a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:i.a.createElement(T.a,{path:"components/"+(I?"BorrowModalPrediction":"BorrowModal"),debt:a.get("symbol"),collateral:r.get("symbol"),borrower:this.props.account.get("name"),mr:q}),I?null:i.a.createElement("div",{style:{paddingBottom:"1rem"}},i.a.createElement("div",{className:"borrow-price-feeds"},i.a.createElement("span",{className:"borrow-price-label"},i.a.createElement(f.a,{content:"transaction.feed_price"}),": "),i.a.createElement(C.a,{noPopOver:!0,quote_amount:a.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:a.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:a.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:a.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),i.a.createElement("b",null),i.a.createElement("div",{className:"borrow-price-final "+(p.below_maintenance?"has-error":p.close_maintenance?"has-warning":"")},i.a.createElement("span",{className:"borrow-price-label"},i.a.createElement(f.a,{content:"exchange.your_price"}),": "),this.state.newPosition?i.a.createElement(C.a,{noPopOver:!0,quote_amount:q*this.state.short_amount*h,quote_asset:a.get("id"),base_asset:r.get("id"),base_amount:this.state.collateral*b}):null)),i.a.createElement("div",{className:"form-group"},i.a.createElement(w.a,{label:"transaction.borrow_amount",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:a.get("id"),assets:[a.get("id")],display_balance:R,placeholder:"0.0",tabIndex:1})),i.a.createElement("div",{className:g},i.a.createElement(w.a,{label:"transaction.collateral",amount:c.toString(),onChange:this._onCollateralChange.bind(this),asset:r.get("id"),assets:[r.get("id")],display_balance:D,placeholder:"0.0",tabIndex:1}),p.collateral_balance?i.a.createElement("div",{style:{paddingTop:"0.5rem"}},p.collateral_balance):null),I?null:i.a.createElement("div",null,i.a.createElement("div",{className:y},i.a.createElement(f.a,{component:"label",content:"borrow.coll_ratio"}),i.a.createElement("input",{min:"0",max:"6",step:"0.01",onChange:this._onRatioChange.bind(this),value:u,type:"range",disabled:!l}),i.a.createElement("div",{className:"inline-block"},_.a.format_number(u,2)),p.below_maintenance||p.close_maintenance?i.a.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},p.below_maintenance,p.close_maintenance):null)),i.a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},i.a.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:O},i.a.createElement(f.a,{content:"borrow.adjust"})),i.a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},i.a.createElement(f.a,{content:"wallet.reset"})),i.a.createElement("div",{href:!0,className:"float-right button info",onClick:this._maximizeCollateral.bind(this)},"Maximize Collateral")))))}}]),t}(i.a.Component);D.propTypes={quote_asset:b.a.ChainAsset.isRequired,bitasset_balance:b.a.ChainObject,backing_asset:b.a.ChainAsset.isRequired,backing_balance:b.a.ChainObject,call_orders:b.a.ChainObjectsList,hasCallOrders:s.PropTypes.bool},D=Object(g.a)(D,{keep_updating:!0});var L=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return o(t,e),R(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;u.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,a=e.backing_asset,n=e.account,r="borrow_modal_"+t,o=n.get("balances").toJS(),s=void 0,l=void 0;if(o)for(var c in o)c===a&&(s=o[c]),c===t&&(l=o[c]);return i.a.createElement(p.a,{id:r,overlay:!0,ref:r},i.a.createElement("div",{className:"grid-block vertical"},i.a.createElement(D,{quote_asset:t,call_orders:n.get("call_orders"),hasCallOrders:n.get("call_orders")&&n.get("call_orders").size>0,modalId:r,bitasset_balance:l,backing_balance:s,backing_asset:a,hide_help:this.state.smallScreen,account:n})))}}]),t}(i.a.Component);t.a=L},1598:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"b",function(){return S}),a.d(t,"c",function(){return N}),a.d(t,"a",function(){return T});var i=a(1),l=a.n(i),c=a(33),u=a(82),p=a(1516),d=a.n(p),m=a(16),h=a(3),f=a.n(h),b=a(1560),g=a(1520),v=a(121),_=a(56),y=a(4),E=a(141),w=a(1553),k=a(1580),O=a(145),A=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),C={textAlign:"left"},N=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),A(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol,n=e.dashboard,r=e.isMyAccount,o=e.settings;o&&o.get("unit");return n?l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:C,colSpan:"5"},l.a.createElement(f.a,{content:"exchange.description"})),l.a.createElement("th",{style:C},l.a.createElement(f.a,{content:"exchange.price"})),l.a.createElement("th",{style:C},l.a.createElement(f.a,{content:"exchange.price_market"})),l.a.createElement("th",{style:{textAlign:"right"}},l.a.createElement(f.a,{content:"exchange.value"})),l.a.createElement("th",null,l.a.createElement(f.a,{content:"account.trade"})),r?l.a.createElement("th",{id:"cancelAllOrders",style:{cursor:"pointer"}},l.a.createElement(f.a,{content:"wallet.cancel"})):null)):l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{paddingLeft:10,textAlign:this.props.leftAlign?"left":""}},l.a.createElement(f.a,{className:"header-sub-title",content:"exchange.price"})),l.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?l.a.createElement("span",{className:"header-sub-title"},l.a.createElement(v.a,{dataPlace:"top",name:a})):null),l.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?l.a.createElement("span",{className:"header-sub-title"},l.a.createElement(v.a,{dataPlace:"top",name:t})):null),l.a.createElement("th",{style:{width:"28%",textAlign:this.props.leftAlign?"left":""}},l.a.createElement(f.a,{className:"header-sub-title",content:"transaction.expiration"})),l.a.createElement("th",null)))}}]),t}(l.a.Component);N.defaultProps={quoteSymbol:null,baseSymbol:null};var S=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),A(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,r=e.showSymbols,o=e.dashboard,s=e.isMyAccount,i=e.settings,p=n.isBid(),d=n.isCall(),h=d?"orderHistoryCall":p?"orderHistoryBid":"orderHistoryAsk",g=r?l.a.createElement("span",null," "+t.get("symbol")+"/"+a.get("symbol")):null,y=r?" "+t.get("symbol"):null,E=r?" "+a.get("symbol"):null,A=i?i.get("unit"):"1.3.0",N=p?"value positive":"value negative",S=p?"value negative":"value positive";return o?l.a.createElement("tr",{key:n.id,className:"clickable"},l.a.createElement("td",{colSpan:"5",style:C,onClick:this.props.onFlip},p?l.a.createElement(f.a,{content:"exchange.buy_description",baseAsset:m.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:m.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:l.a.createElement(v.a,{noTip:!0,customClass:N,name:a.get("symbol")}),quoteName:l.a.createElement(v.a,{noTip:!0,customClass:S,name:t.get("symbol")})}):l.a.createElement(f.a,{content:"exchange.sell_description",baseAsset:m.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:m.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:l.a.createElement(v.a,{noTip:!0,customClass:N,name:a.get("symbol")}),quoteName:l.a.createElement(v.a,{noTip:!0,customClass:S,name:t.get("symbol")})})),l.a.createElement("td",{style:C,onClick:this.props.onFlip},l.a.createElement(O.a,{base_amount:n.sellPrice().base.amount,base_asset:n.sellPrice().base.asset_id,quote_amount:n.sellPrice().quote.amount,quote_asset:n.sellPrice().quote.asset_id,force_direction:t.get("symbol"),hide_symbols:!0})),l.a.createElement("td",{style:C,onClick:this.props.onFlip},l.a.createElement(k.a,{base:t.get("id"),quote:a.get("id"),force_direction:t.get("symbol"),hide_symbols:!0,hide_asset:!0})),l.a.createElement("td",{style:{textAlign:"right"},onClick:this.props.onFlip},l.a.createElement(w.b,{hide_asset:!0,amount:n.amountForSale().getAmount(),fromAsset:n.amountForSale().asset_id,noDecimals:!0,toAsset:A})," ",l.a.createElement(v.a,{name:A})),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/market/"+a.get("symbol")+"_"+t.get("symbol")},l.a.createElement(_.a,{name:"trade",className:"icon-14px"}))),s?l.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},d?null:l.a.createElement("span",{style:{marginRight:0},className:"order-cancel"},l.a.createElement("input",{type:"checkbox",className:"orderCancel",onChange:this.props.onCheckCancel}))):null):l.a.createElement("tr",{key:n.id},l.a.createElement("td",{className:h,style:{paddingLeft:10}},l.a.createElement(b.a,{price:n.getPrice(),base:t,quote:a}),g),l.a.createElement("td",null,m.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))," ",E),l.a.createElement("td",null,m.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",y),l.a.createElement("td",{style:{width:"28%"}},d?null:l.a.createElement(u.a,{value:n.expiration,format:"short"})),l.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},d?null:l.a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},l.a.createElement(_.a,{name:"cross-circle",className:"icon-14px"}))))}}]),t}(l.a.Component);S.defaultProps={showSymbols:!1};var T=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._getOrders=e._getOrders.bind(e),e}return s(t,e),A(t,[{key:"componentDidMount",value:function(){var e=this.refs.asks;e&&d.a.initialize(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.asks;e&&d.a.update(e)}},{key:"_getOrders",value:function(){var e,t=this.props,a=t.currentAccount,r=t.base,o=t.quote,s=t.feedPrice,i=a.get("orders"),l=a.get("call_orders"),c=r.get("id"),u=o.get("id"),p=(e={},n(e,r.get("id"),{precision:r.get("precision")}),n(e,o.get("id"),{precision:o.get("precision")}),e),d=i.toArray().map(function(e){var t=y.b.getObject(e);if(!t)return null;var a=t.getIn(["sell_price","base","asset_id"]),n=t.getIn(["sell_price","quote","asset_id"]);return a===c&&n===u||a===u&&n===c?new E.d(t.toJS(),p,o.get("id")):void 0}).filter(function(e){return!!e}),m=l.toArray().map(function(e){try{var t=y.b.getObject(e);if(!t)return null;var a=t.getIn(["call_price","base","asset_id"]),n=t.getIn(["call_price","quote","asset_id"]);if(a===c&&n===u||a===u&&n===c)return s?new E.b(t.toJS(),p,o.get("id"),s):null}catch(e){return null}}).filter(function(e){return!!e}).filter(function(e){try{return e.isMarginCalled()}catch(e){return!1}});return d.concat(m)}},{key:"render",value:function(){var e=this,t=this.props,a=t.base,n=t.quote,r=t.quoteSymbol,o=t.baseSymbol;if(!a||!n)return null;var s=this._getOrders(),i=l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"center"},colSpan:"5"},l.a.createElement(f.a,{content:"account.no_orders"}))),c=s.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var r=t.getPrice();return l.a.createElement(S,{price:r,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),u=s.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var r=t.getPrice();return l.a.createElement(S,{price:r,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),p=[];return u.length&&(p=p.concat(u)),c.length&&(p=p.concat(c)),p.sort(function(e,t){return e.props.price-t.props.price}),l.a.createElement("div",{key:"open_orders",className:this.props.className},l.a.createElement("div",{className:"exchange-bordered small-12",style:{height:330}},l.a.createElement("div",{className:"exchange-content-header"},l.a.createElement(f.a,{content:"exchange.my_orders"})),l.a.createElement("table",{className:"table order-table table-hover"},l.a.createElement(N,{leftAlign:!0,type:"sell",baseSymbol:o,quoteSymbol:r})),l.a.createElement("div",{className:"grid-block no-padding market-right-padding",ref:"asks",style:{overflow:"hidden",maxHeight:200}},l.a.createElement("table",{style:{paddingBottom:5},className:"table order-table table-hover"},l.a.createElement(g.a,{component:"tbody",transitionName:"newrow"},p.length?p:i)))))}}]),t}(l.a.Component);T.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},T.propTypes={base:i.PropTypes.object.isRequired,quote:i.PropTypes.object.isRequired,orders:i.PropTypes.object.isRequired,quoteSymbol:i.PropTypes.string.isRequired,baseSymbol:i.PropTypes.string.isRequired}},1599:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(1),i=a.n(s),l=a(40),c=a.n(l),u=a(104),p=a(3),d=a.n(p),m=a(141),h=a(16),f=a(32),b=a(34),g=a(88),v=a(142),_=a.n(v),y=a(7),E=a.n(y),w=a(281),k=a(678),O=a(56),A=a(105),C=a(277),N=a(121),S=a(4),T=a(122),P=(a.n(T),a(686)),x=a(123),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},R=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),D=function(t){function a(e){n(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={toAddress:w.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new m.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{},loading:!1,emptyAddressDeposit:!1},t._validateAddress(t.state.toAddress,e),t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(T.debounce)(t._updateFee.bind(t),250),t}return o(a,t),R(a,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new m.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:w.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=Object(w.j)({coin:"open."+this.props.backingCoinType.toLowerCase(),account:this.props.account,stateCallback:this.addDepositAddress});e?this.setState({receive_address:e}):Object(w.l)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"requestDepositAddressLoad",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(w.l)(this._getDepositObject())}},{key:"addDepositAddress",value:function(e){e.error&&("no_address"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e,loading:!1})}},{key:"componentDidUpdate",value:function(){_.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var a=this._getFee(),n=this._getGateFee(),r=this.state.to_withdraw.clone(),o=r.clone(this._getCurrentBalance().get("balance"));r.plus(n),o.lt(r)&&(r=this.state.to_withdraw.clone()),g.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,a.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),a=new m.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});a.asset_id===e.asset_id&&a.minus(e),this.state.to_withdraw.setAmount({sats:a.getAmount()}),this.setState({withdrawValue:a.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var a=["1.3.0",this.state.to_withdraw.asset_id],n={},r=[];a.forEach(function(a){r.push(Object(C.b)({accountID:t.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(r).then(function(t){a.forEach(function(e,a){n[e]=t[a]}),h.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(C.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var a=t.fee,n=t.hasBalance,r=t.hasPoolBalance;e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:r,error:!n||!r},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this;return this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.to_withdraw,n=this.props.asset,r=this._getCurrentBalance();if(r&&t){var o=Object(C.a)(a.getAmount({real:!0}),n,this._getFee(),r,this._getGateFee());if(null!==o)return this.state.balanceError!==!o&&this.setState({balanceError:!o}),o}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],a=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&a&&a.hasBalance?a.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(w.m)({url:x.a.BASE_OL,walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,a=e.asset;return new m.a({real:parseFloat(t?t.replace(",",""):0),asset_id:a.get("id"),precision:a.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=h.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),a=t.name,n=1,r=this.props.supportsMemos,o=this._getFee(),s=this._getGateFee(),l=this.state.feeStatus[o.asset_id],c=S.b.getAsset(o.asset_id),u=l&&!l.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(d.a,{content:"gateway.withdraw_funds",asset:a})),this._renderCurrentBalance(),i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("label",{className:"left-label"},E.a.translate("modal.withdraw.amount")),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("input",{tabIndex:n++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),i.a.createElement("div",{className:"form-label select floating-dropdown"},i.a.createElement("div",{className:"dropdown-wrapper inactive"},i.a.createElement("div",null,a)))),e?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(d.a,{content:e})):null,this.state.balanceError?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("label",{className:"left-label"},E.a.translate("transfer.fee")),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("input",{type:"text",disabled:!0,value:o.getAmount({real:!0})}),i.a.createElement("div",{className:"form-label select floating-dropdown"},i.a.createElement("div",{className:"dropdown-wrapper inactive"},i.a.createElement("div",null,c?i.a.createElement(N.a,{name:c.get("symbol")}):null)))),l&&!l.hasBalance?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("label",{className:"left-label"},E.a.translate("gateway.fee")),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("input",{type:"text",disabled:!0,value:s.getAmount({real:!0})}),i.a.createElement("div",{className:"form-label select floating-dropdown"},i.a.createElement("div",{className:"dropdown-wrapper inactive"},i.a.createElement("div",null,i.a.createElement(N.a,{name:this.props.asset.get("symbol")}))))),l&&!l.hasBalance?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("label",{className:"left-label"},E.a.translate("modal.withdraw.address")),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("input",{placeholder:E.a.translate("gateway.withdraw_placeholder",{asset:a}),tabIndex:n++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),i.a.createElement("div",{className:"form-label select floating-dropdown"},i.a.createElement("div",{className:"dropdown-wrapper inactive"},i.a.createElement("div",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_address",{asset:a})},"?")))),!this.state.validAddress&&this.state.toAddress?i.a.createElement("div",{className:"has-error",style:{paddingTop:10}},i.a.createElement(d.a,{content:"gateway.valid_address",coin_type:a})):null),r?i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("label",{className:"left-label"},E.a.translate("transfer.memo")),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("textarea",{rows:"1",value:this.state.memo,tabIndex:n++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?i.a.createElement("div",{className:"has-error",style:{paddingTop:10}},i.a.createElement(d.a,{content:"gateway.valid_address",coin_type:a})):null):null,i.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},i.a.createElement("button",{tabIndex:n++,className:"button"+(u?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},i.a.createElement(d.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state,t=e.receive_address,a=e.loading,n=e.emptyAddressDeposit,r=h.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),o=r.name,s=t&&"memo"in t&&t.memo,l=t&&t.address||"",c=1;return i.a.createElement("div",{className:l?"":"no-overflow"},i.a.createElement("p",null,i.a.createElement(d.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name")})),this._renderCurrentBalance(),i.a.createElement("div",{className:"SimpleTrade__withdraw-row"},i.a.createElement("p",{style:{marginBottom:10},"data-place":"right","data-tip":E.a.translate("tooltip.deposit_tip",{asset:o})},i.a.createElement(d.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:o}),":",i.a.createElement("label",{className:"fz_12 left-label"},i.a.createElement(d.a,{content:"gateway.deposit_notice_delay"}))),l?i.a.createElement("label",null,n?i.a.createElement(d.a,{content:"gateway.please_generate_address"}):i.a.createElement("span",{className:"inline-label"},i.a.createElement("input",{readOnly:!0,type:"text",value:l}),i.a.createElement(k.a,{text:l})," ")):i.a.createElement(A.a,{type:"three-bounce"}),s?i.a.createElement("label",null,i.a.createElement("span",{className:"inline-label"},i.a.createElement("input",{readOnly:!0,type:"text",value:E.a.translate("transfer.memo")+": "+t.memo}),i.a.createElement(k.a,{text:t.memo}))):null,t&&t.error?i.a.createElement("div",{className:"has-error",style:{paddingTop:10}},t.error.message):null),i.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},i.a.createElement("button",{tabIndex:c++,className:"button spinner-button-circle",onClick:this.requestDepositAddressLoad.bind(this),type:"submit"},a?i.a.createElement(A.a,{type:"circle"}):null,i.a.createElement(d.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=h.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),t=e.name,a="deposit"===this.props.action,n=this._getCurrentBalance(),r=n?new m.a({asset_id:n.get("asset_type"),precision:this.props.asset.get("precision"),amount:n.get("balance")}):null,o=a?i.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},t):i.a.createElement("button",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,n?parseInt(n.get("balance"),10):0)},i.a.createElement(O.a,{name:"clippy"}));return i.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},i.a.createElement("label",{style:{fontSize:"1rem"}},E.a.translate("gateway.balance_asset",{asset:t}),":",i.a.createElement("span",{className:"inline-label"},i.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:r?r.getAmount({real:!0}):0}),o)))}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.action,n="deposit"===a;if(!t)return null;var r=h.a.replaceName(t.get("symbol"),!0),o=r.name,s=this.props.isDown?i.a.createElement("div",null,i.a.createElement(d.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?n?this._renderDeposit():this._renderWithdraw():i.a.createElement("div",null,i.a.createElement(d.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return i.a.createElement("div",{className:"SimpleTrade__modal"},i.a.createElement("div",{className:"Modal__header"},i.a.createElement("h3",null,i.a.createElement(d.a,{content:n?"gateway.deposit":"modal.withdraw.submit"})," ",o)),i.a.createElement("div",{className:"Modal__divider"}),i.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},s))}}]),a}(P.a);D.propTypes={sender:b.a.ChainAccount.isRequired,asset:b.a.ChainAsset.isRequired,coreAsset:b.a.ChainAsset.isRequired,globalObject:b.a.ChainAsset.isRequired},D.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},D=Object(f.a)(D);var L=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return o(t,e),R(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){c.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return i.a.createElement(u.a,{className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.state.open?i.a.createElement(D,j({},this.props,{open:this.state.open})):null)}}]),t}(i.a.Component);t.a=L}).call(t,a(2).Buffer)},1600:function(e,t,a){"use strict";function n(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(1),l=a.n(i),c=a(40),u=a.n(c),p=a(104),d=a(3),m=a.n(d),h=a(141),f=a(16),b=a(32),g=a(34),v=a(142),_=a.n(v),y=a(7),E=a.n(y),w=a(281),k=a(677),O=a(678),A=a(56),C=a(105),N=a(123),S=a(285),T=a(26),P=(a.n(T),a(38)),x=a(27),j=a(675),R=a.n(j),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),q=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={toAddress:w.a.getLast(e.walletType),withdrawValue:"",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new k.a,a}return s(t,e),L(t,[{key:"onClose",value:function(){u.a.publish(this.props.modalId,"close")}},{key:"componentWillMount",value:function(){this._getDepositAddress()}},{key:"componentDidMount",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:"componentWillReceiveProps",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!f.a.are_equal_shallow(t,this.state)}},{key:"_getDepositLimit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(w.k)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log("deposit limit error:",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:"_onAmountChange",value:function(e,t){var a=new RegExp(/[[:digit:]]/),n=t.target;switch(a.test(n.value)||(n.value=n.value.replace(/[^0-9.]/g,"")),"."==n.value.charAt(0)&&(n.value="0."),n.value.charAt(n.value.length)!=n.value.search(".")&&n.value.substr(1),n.value=f.a.limitByPrecision(n.value,8),e){case"input":this.setState({inputAmount:n.value},this._estimateOutput.bind(this));break;case"output":this.setState({outputAmount:n.value},this._estimateInput.bind(this))}}},{key:"_estimateOutput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(w.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log("receive amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_estimateInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(w.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:f.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log("send amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_getDepositAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(w.l)(this._getDepositObject(e))}}},{key:"_getDepositObject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get("name"),url:N.a.BASE,stateCallback:function(a){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get("name"),a)}}}},{key:"addDepositAddress",value:function(e,t,a,n){this.deposit_address_cache.cacheInputAddress("blocktrades",a,e,t,n.address,n.memo),this.setState({receive_address:n})}},{key:"componentDidUpdate",value:function(){_.a.rebuild()}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(w.m)({walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(P.a.site_registr,"_blank").opener=null}},{key:"_onDropDownSelect",value:function(e){x.a.changeViewSetting({preferredBridge:e})}},{key:"onBlockTradesContact",value:function(){console.log("Open New Tab"),window.open("https://www.blocktrades.us/contact","_blank").focus()}},{key:"_renderDeposit",value:function(){var e=f.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),t=e.name,a=e.prefix,n=this.state,r=n.receive_address,o=n.apiError,s=r&&"memo"in r&&r.memo,i=r&&r.address||"",c=l.a.createElement("div",{className:"SimpleTrade__QR"},l.a.createElement(R.a,{size:140,value:i})),u=Object.keys(this.props.bridges.toJS()),p=this.props.inputCoinType.toUpperCase(),d=(a||"")+t,h=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),b=d+"/"+p,g=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),v=g?{border:"1px solid #a94442"}:null;return l.a.createElement("div",{className:i?"":"no-overflow"},l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("label",{className:"left-label"},"ASSET"),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"text",defaultValue:d}))),l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},"BRIDGE"),l.a.createElement("span",{"data-tip":E.a.translate("tooltip.bridge_TRADE"),className:"inline-block tooltip",onClick:this.onBlockTradesContact.bind(this)}," ",l.a.createElement(A.a,{style:{position:"relative",top:0},name:"question-circle"}))),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"text",defaultValue:"BLOCKTRADES"})," ")),l.a.createElement("span",{style:o?{display:"none"}:{display:""}},l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("div",{className:"small-6",style:{paddingRight:10}},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},l.a.createElement(m.a,{content:"transfer.send"})),g?l.a.createElement("div",{className:"error-msg inline-block tooltip","data-tip":E.a.translate("tooltip.over_limit")},l.a.createElement(m.a,{content:"gateway.over_limit"})," ",l.a.createElement(A.a,{name:"question-circle"})):null),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{style:v,type:"text",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,"input")}),l.a.createElement("div",{className:"form-label select floating-dropdown"},l.a.createElement(S.a,{entries:u,values:u.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:u[0],value:this.props.preferredBridge||u[0],onChange:this._onDropDownSelect,upperCase:!0})))),l.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},l.a.createElement("label",{className:"left-label"},l.a.createElement(m.a,{content:"gateway.deposit_limit"})),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"number",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),l.a.createElement("div",{className:"input-right-symbol"},p))))),l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("div",{className:"small-6",style:{paddingRight:10}},l.a.createElement("label",{className:"left-label"},l.a.createElement(m.a,{content:"exchange.receive"})),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{style:v,type:"text",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,"output")}),l.a.createElement("div",{className:"input-right-symbol"},d))),l.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},l.a.createElement(m.a,{content:"exchange.price"}),"  ",this.state.receiveLoading?l.a.createElement(m.a,{content:"footer.loading"}):"")),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"number",value:g?0:h}),l.a.createElement("div",{className:"input-right-symbol"},b))))),i?l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center"}},s?null:c,l.a.createElement("div",{className:"grid-block SimpleTrade__deposit-info"},l.a.createElement("div",{className:"copyIcon"},l.a.createElement(O.a,{text:i,className:"SimpleTrade__copyIcon"})),l.a.createElement("div",{className:"deposit-details"},l.a.createElement("div",null,l.a.createElement(m.a,{content:"gateway.purchase_notice",inputAsset:p,outputAsset:d})),l.a.createElement("div",null,i))),s?l.a.createElement("div",{className:"grid-block SimpleTrade__deposit-info",style:{marginTop:"10px"}},l.a.createElement("div",{className:"copyIcon"},l.a.createElement(O.a,{text:r.memo,className:"SimpleTrade__copyIcon"})),l.a.createElement("div",{className:"deposit-details"},l.a.createElement("div",null,l.a.createElement(m.a,{unsafe:!0,content:"gateway.purchase_notice_memo"})),l.a.createElement("div",null,r.memo))):null):l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(C.a,{type:"three-bounce"})),l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem"}},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},l.a.createElement(m.a,{content:"transfer.close"}))))),l.a.createElement("span",{style:o?{display:""}:{display:"none"}},l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem",color:"#bb2926"}},l.a.createElement(m.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"}),l.a.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},l.a.createElement(m.a,{content:"transfer.close"})))))}},{key:"_renderCurrentBalance",value:function(){var e=this,t=f.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),a=t.name,n="deposit"===this.props.action,r=this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}),o=r?new h.a({asset_id:r.get("asset_type"),precision:this.props.asset.get("precision"),amount:r.get("balance")}):null,s=n?l.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},a):l.a.createElement("button",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,r?parseInt(r.get("balance"),10):0)},l.a.createElement(A.a,{name:"clippy"}));return l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},l.a.createElement("label",{style:{fontSize:"1rem"}},E.a.translate("gateway.balance_asset",{asset:a}),":",l.a.createElement("span",{className:"inline-label"},l.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:o?o.getAmount({real:!0}):0}),s)))}},{key:"render",value:function(){if(!this.props.asset)return null;var e=a(146);return l.a.createElement("div",{className:"SimpleTrade__modal"},l.a.createElement("div",{className:"Modal__header",style:{background:"none"}}),l.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem"}},l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("img",{style:{margin:0,height:80},src:e}),l.a.createElement("br",null),l.a.createElement("p",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:0}},"Buy")),this.props.isDown?l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"})):this.props.isAvailable?this._renderDeposit():l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}))))}}]),t}(l.a.Component);q.propTypes={sender:g.a.ChainAccount.isRequired,asset:g.a.ChainAsset.isRequired},q=Object(b.a)(q);var I=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.preferredBridge,a=n(e,["preferredBridge"]),r=this.props.bridges.get(this.props.preferredBridge);return r||(r=this.props.bridges.first(),t=r.inputCoinType),l.a.createElement(q,D({},a,{preferredBridge:t},r.toJS()))}}]),t}(l.a.Component);I=Object(T.connect)(I,{listenTo:function(){return[P.a]},getProps:function(){return{preferredBridge:P.a.getState().viewSettings.get("preferredBridge","btc")}}});var M=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return s(t,e),L(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){u.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.props.bridges?l.a.createElement(p.a,{className:"test",onClose:this.onClose.bind(this),id:this.props.modalId,overlay:!0},this.state.open?l.a.createElement(I,D({},this.props,{open:this.state.open})):null):null}}]),t}(l.a.Component);t.a=M},1872:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e){return new Promise(function(t,a){if(!e||e&&!e.get("call_orders",[]).size)return t(null);Object(G.f)("getObject",e.get("call_orders").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),n=e.getIn(["call_price","quote","asset_id"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(G.f)("getAsset",a).then(function(a){var n={};a.forEach(function(e){n[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=n[e.getIn(["call_price","quote","asset_id"])],a=n[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)r[t.id]={ratio:null};else{var s=new bt.a({amount:e.get("collateral"),asset_id:a.id,precision:a.precision}),i=new bt.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new bt.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:s.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),t(r)})}).catch(a)})}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var j=a(1),R=a.n(j),D=a(18),L=a.n(D),q=a(3),I=a.n(q),M=a(671),W=a(681),F=a(40),Y=a.n(F),B=a(104),X=a(34),H=a(32),U=a(16),V=a(278),K=a(25),z=a(7),J=a.n(z),G=a(4),Q=a(672),$=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Z=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return o(t,e),$(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),Y.a.publish("settlement_modal","close");var t=U.a.get_asset_precision(this.props.asset.get("precision")),a=this.state.amount.replace(/,/g,"");a*=t;var n=V.a.new_transaction();return n.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:a,asset_id:this.props.asset.get("id")}}),K.a.process_transaction(n,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var r=t.get("id"),o=a.get("balances"),s=null,i=0;o&&o.forEach(function(e){var t=G.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===r&&(s=e,i=t.get("balance"))});var l=U.a.get_asset_precision(t.get("precision")),c=n?n.replace(/,/g,""):0,u=parseFloat(c)>0&&parseFloat(c)*l<=parseFloat(i)?"button success":"button disabled",p=s?R.a.createElement("span",null,R.a.createElement(I.a,{content:"exchange.balance"}),": ",R.a.createElement(M.a,{balance:s})):null;return R.a.createElement("form",{className:"grid-block vertical full-width-content"},R.a.createElement(I.a,{component:"h3",content:"modal.settle.title",asset:t.get("symbol")}),R.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},R.a.createElement("div",{className:"content-block",style:{maxWidth:"25rem"}},R.a.createElement(Q.a,{label:"modal.settle.amount",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:p,asset:r,assets:[r],tabIndex:1})),R.a.createElement("div",{className:"content-block"},R.a.createElement("input",{type:"submit",className:u,onClick:this.onSubmit.bind(this),value:J.a.translate("modal.settle.submit")}))))}}]),t}(R.a.Component);Z.propTypes={asset:X.a.ChainAsset.isRequired,account:X.a.ChainAccount.isRequired},Z=Object(H.a)(Z,{keep_updating:!0});var ee=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),$(t,[{key:"show",value:function(){Y.a.publish("settlement_modal","open")}},{key:"render",value:function(){return R.a.createElement(B.a,{id:"settlement_modal",overlay:!0,ref:"settlement_modal"},R.a.createElement("div",{className:"grid-block vertical"},R.a.createElement(Z,this.props)))}}]),t}(R.a.Component),te=ee,ae=a(1553),ne=a(82),re=a(26),oe=a(276),se=a(142),ie=a.n(se),le=a(1580),ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ue=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),pe=function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},de=function(e){function t(e){return i(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return c(t,e),ue(t,[{key:"componentDidMount",value:function(){ie.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return pe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",a=R.a.createElement(ne.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return R.a.createElement("span",{className:"value "+t},a,"%")}}]),t}(le.b);de.propTypes={quote:X.a.ChainAsset.isRequired,base:X.a.ChainAsset.isRequired},de.defaultProps={quote:"1.3.0",fullPrecision:!1,noDecimals:!1,hide_asset:!1},de=Object(H.a)(de,{keep_updating:!0});var me=function(e){function t(){return i(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),ue(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=s(e,["refCallback"]);return R.a.createElement(de,ce({},a,{ref:t}))}}]),t}(R.a.Component);me=Object(re.connect)(me,{listenTo:function(){return[oe.a]},getProps:function(e){return{marketStats:oe.a.getState().allMarketStats.get(e.marketId),allMarketStats:oe.a.getState().allMarketStats}}});var he=a(121),fe=a(68),be=a(145),ge=a(1581),ve=a(56),_e=a(33),ye=a(293),Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),ke={textAlign:"right"},Oe={textAlign:"left"},Ae=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),we(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=V.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),K.a.process_transaction(t,null,!0)}},{key:"_getBalance",value:function(){var e=this.props.account,t=this.props.object.getIn(["call_price","quote","asset_id"]),a=e.get("balances"),n=0;return a&&a.forEach(function(e,a){if(a==t){var r=G.b.getObject(e);n=r.get("balance")}}),n}},{key:"_getFeedPrice",value:function(){return this.props?1/U.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return U.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(U.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?J.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?J.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object,r=n.toJS(),o=this._getCollateralRatio(),s=U.a.get_asset_amount(r.debt,this.props.debtAsset),i=this._getBalance(),l=this._getStatusClass(),c="/asset/"+t.get("symbol"),p="/market/"+t.get("symbol")+"_"+a.get("symbol"),d=R.a.createElement("ul",null,R.a.createElement("li",null,R.a.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},R.a.createElement(I.a,{content:"account.asset_details"}))),R.a.createElement("li",null,R.a.createElement("a",{href:p,onClick:this._onNavigate.bind(this,p)},R.a.createElement(he.a,{name:t.get("symbol")})," : ",R.a.createElement(he.a,{name:a.get("symbol")}))));return R.a.createElement("tr",{className:"margin-row"},R.a.createElement("td",{style:Oe},R.a.createElement(_e.b,{to:"/asset/"+t.get("symbol")},R.a.createElement(he.a,{noTip:!0,name:t.get("symbol")}))),R.a.createElement("td",{style:ke},R.a.createElement(fe.a,{amount:i,asset:r.call_price.quote.asset_id,assetInfo:d,hide_asset:!0})),R.a.createElement("td",{style:ke},R.a.createElement(fe.a,{amount:r.debt,asset:r.call_price.quote.asset_id,assetInfo:d,hide_asset:!0})),R.a.createElement("td",{style:ke,className:"column-hide-medium"},R.a.createElement(fe.a,{decimalOffset:5,amount:r.collateral,asset:r.call_price.base.asset_id})),R.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+l},U.a.format_number(o,2)),R.a.createElement("td",{style:ke},R.a.createElement(W.a,{noTip:!0,balances:Object(D.List)(),debt:u({},t.get("id"),r.debt),collateral:u({},a.get("id"),parseInt(r.collateral,10)),hide_asset:!0})),R.a.createElement("td",{style:ke,className:"column-hide-small"},R.a.createElement(be.a,{base_amount:r.call_price.base.amount,base_asset:r.call_price.base.asset_id,quote_amount:r.call_price.quote.amount,quote_asset:r.call_price.quote.asset_id,hide_symbols:!0})),R.a.createElement("td",{style:ke,className:"column-hide-small"},R.a.createElement(be.a,{base_amount:t.getIn(["bitasset","current_feed","settlement_price","base","amount"]),base_asset:r.call_price.quote.asset_id,quote_amount:t.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),quote_asset:r.call_price.base.asset_id,hide_symbols:!0})),R.a.createElement("td",{className:"center-content column-hide-small",style:Oe},R.a.createElement(be.a,{base_amount:r.call_price.base.amount,base_asset:r.call_price.base.asset_id,quote_amount:r.call_price.quote.amount,quote_asset:r.call_price.quote.asset_id,hide_value:!0})),R.a.createElement("td",null,R.a.createElement("div",{"data-place":"left","data-tip":J.a.translate("tooltip.update_position"),style:{paddingBottom:5}},R.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},R.a.createElement(ve.a,{name:"adjust",className:"icon-14px rotate90"})))),R.a.createElement("td",null,R.a.createElement("div",{"data-place":"left","data-tip":J.a.translate("tooltip.close_position",{amount:s,asset:t.get("symbol")}),style:{paddingBottom:5}},R.a.createElement("a",{onClick:this._onClosePosition.bind(this)},R.a.createElement(ve.a,{name:"cross-circle",className:"icon-14px"}))),t?R.a.createElement(ge.a,{ref:"cp_modal_"+r.call_price.quote.asset_id,quote_asset:r.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}(R.a.Component);Ae.propTypes={debtAsset:X.a.ChainAsset.isRequired,collateralAsset:X.a.ChainAsset.isRequired},Ae.defaultProps={tempComponent:"tr"},Ae.contextTypes={router:R.a.PropTypes.object},Ae=Object(H.a)(Ae,{keep_updating:!0});var Ce=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),we(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn(["call_price","quote","asset_id"]),r=t.getIn(["call_price","base","asset_id"]);return R.a.createElement(Ae,Ee({debtAsset:n,collateralAsset:r,account:a},this.props))}}]),t}(R.a.Component);Ce.propTypes={object:X.a.ChainObject.isRequired},Ce=Object(H.a)(Ce,{keep_updating:!0});var Ne=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),we(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/U.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,r=t.get("id"),o=n.get("balances"),s=0;o&&o.forEach(function(e,t){if(t==r){var a=G.b.getObject(e);s=a.get("balance")}});var i="/asset/"+t.get("symbol"),l="/market/"+t.get("symbol")+"_"+a.get("symbol"),c=R.a.createElement("ul",null,R.a.createElement("li",null,R.a.createElement("a",{href:i,onClick:this._onNavigate.bind(this,i)},R.a.createElement(I.a,{content:"account.asset_details"}))),R.a.createElement("li",null,R.a.createElement("a",{href:l,onClick:this._onNavigate.bind(this,l)},R.a.createElement(he.a,{name:t.get("symbol")})," : ",R.a.createElement(he.a,{name:a.get("symbol")}))));return R.a.createElement("tr",{className:"margin-row"},R.a.createElement("td",{style:Oe},R.a.createElement(_e.b,{to:"/asset/"+t.get("symbol")},R.a.createElement(he.a,{noTip:!0,name:t.get("symbol")}))),R.a.createElement("td",{style:ke},R.a.createElement(fe.a,{amount:s,asset:t.get("id"),assetInfo:c,hide_asset:!0})),R.a.createElement("td",{style:ke},R.a.createElement(fe.a,{amount:0,asset:t.get("id"),assetInfo:c,hide_asset:!0})),R.a.createElement("td",{style:ke,className:"column-hide-medium"},R.a.createElement(fe.a,{decimalOffset:5,amount:0,asset:a.get("id")})),R.a.createElement("td",null),R.a.createElement("td",{style:ke}),R.a.createElement("td",{style:ke,className:"column-hide-small"}),R.a.createElement("td",{style:ke,className:"column-hide-small"}),R.a.createElement("td",{className:"center-content column-hide-small",style:Oe}),R.a.createElement("td",null,R.a.createElement("div",{"data-place":"left","data-tip":J.a.translate("tooltip.update_position"),style:{paddingBottom:5}},R.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},R.a.createElement(ve.a,{name:"adjust",className:"icon-14px rotate90"})))),R.a.createElement("td",null,t?R.a.createElement(ge.a,{ref:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}(R.a.Component);Ne.propTypes={debtAsset:X.a.ChainAsset.isRequired,collateralAsset:X.a.ChainAsset.isRequired},Ne.defaultProps={tempComponent:"tr"},Ne.contextTypes={router:R.a.PropTypes.object},Ne=Object(H.a)(Ne);var Se=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),we(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.objects,r=t.optionals;if(n=n.filter(function(e){return!!e}),r=r.filter(function(e){return!!e}),!r.length)return null;if(n.forEach(function(e){if(e){var t=r.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&r.splice(t,1)}}),!r.length)return null;var o=r.map(function(t){return R.a.createElement(Ne,Ee({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"]),account:a},e.props))});return R.a.createElement("tbody",null,o)}}]),t}(R.a.Component);Se.propTypes={objects:X.a.ChainObjectsList,optionals:X.a.ChainAssetsList},Se.defaultProps={optionals:L.a.List(["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362","1.3.105","1.3.106"])},Se=Object(H.a)(Se,{keep_updating:!0});var Te=function(e){var t=e.callOrders,a=e.account,n=e.className,r=e.children,o=e.preferredUnit;return R.a.createElement("table",{className:"table table-hover "+n},R.a.createElement("thead",null,R.a.createElement("tr",null,R.a.createElement("th",{style:Oe},R.a.createElement(I.a,{content:"explorer.asset.title"})),R.a.createElement("th",{style:ke},R.a.createElement(I.a,{content:"exchange.balance"})),R.a.createElement("th",{style:ke},R.a.createElement(I.a,{content:"transaction.borrow_amount"})),R.a.createElement("th",{style:ke,className:"column-hide-medium"},R.a.createElement(I.a,{content:"transaction.collateral"})),R.a.createElement("th",null,R.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":J.a.translate("tooltip.coll_ratio")},R.a.createElement(I.a,{content:"borrow.coll_ratio"}))),R.a.createElement("th",null,R.a.createElement(ye.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:o,arg:"asset"}]})),R.a.createElement("th",{style:ke,className:"column-hide-small"},R.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":J.a.translate("tooltip.call_price")},R.a.createElement(I.a,{content:"exchange.call"}))),R.a.createElement("th",{style:ke,className:"column-hide-small"},R.a.createElement(I.a,{content:"exchange.price"})),R.a.createElement("th",{className:"column-hide-small",style:Oe},R.a.createElement(I.a,{content:"explorer.assets.units"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"borrow.adjust_short"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"transfer.close"})))),R.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return R.a.createElement(Ce,{key:e,object:e,account:a})})),R.a.createElement(Se,{account:a,objects:L.a.List(t)}),R.a.createElement("tbody",null,r))},Pe=Te,xe=a(1547),je=a(299),Re=a(187),De=a(57),Le=a(143),qe=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},Ie={AccountPermission:function(e,t,a){var n=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([a,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([a,"key_auths"]).map(function(e){return new qe(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var r=n._sumWeights(e);return n.isMultiSig()&&(r+=n.sumKeys(t)),r},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var r=G.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var o=G.b.getAccount(r.get(0));o&&e.accounts.push(a.unravel(new a.AccountPermission(o,r.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=G.b.getAccount(e),o=a.unravel(new a.AccountPermission(r,null,t),t);n.push(o)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},Me=Ie,We=a(122),Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ye=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Be=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),Ye(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.available,r=t.availableKeys,o=t.permission,s=t.threshold,i=o.isAvailable(n),l=o.isNested(),c=o.isMultiSig(),u=[],p=s&&s>10?U.a.get_percentage(o.weight,this.props.threshold):o.weight,d=o&&o.threshold>10?U.a.get_percentage(o.getStatus(n,r),o.threshold)+" / 100%":o.getStatus(n,r)+" / "+o.threshold;return u.push(R.a.createElement("div",{key:a.get("id"),style:{textAlign:"left",width:"100%",clear:"both",paddingBottom:5}},R.a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},R.a.createElement(Le.a,{subpage:"permissions",account:a.get("id")}),!l&&p?(p&&2===p.length?"  ":"")+"("+p+") ":null),R.a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},l||c?R.a.createElement("span",{className:i?"success-text":""},d):R.a.createElement("span",null,i?R.a.createElement(ve.a,{name:"checkmark-circle",size:"1x",className:"success"}):R.a.createElement(ve.a,{name:"cross-circle",size:"1x",className:"error"}))))),(l||c)&&(o.accounts.forEach(function(t){u.push(R.a.createElement(Xe,{key:t.id,indent:e.props.indent+1,account:t.id,accounts:t.accounts,permission:t,available:n,availableKeys:r,threshold:o.threshold}))}),o.keys.length&&o.keys.forEach(function(t){u.push(R.a.createElement(He,{key:t.id,permission:t,available:r,indent:e.props.indent+1}))})),R.a.createElement("div",null,u)}}]),t}(R.a.Component);Be.propTypes={account:X.a.ChainAccount.isRequired,accounts:X.a.ChainAccountsList,indent:R.a.PropTypes.number.isRequired},Be.defaultProps={indent:0};var Xe=Object(H.a)(Be),He=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),Ye(t,[{key:"render",value:function(){var e=this.props,t=e.available,a=e.permission,n=a.isAvailable(t),r=[];return r.push(R.a.createElement("div",{key:a.id,style:{textAlign:"left",width:"100%",paddingBottom:5}},R.a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},R.a.createElement("span",null,a.id.substr(0,20-4*this.props.indent),"... (",a.weight,")")),R.a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},R.a.createElement("span",null,n?R.a.createElement(ve.a,{name:"checkmark-circle",size:"1x",className:"success"}):R.a.createElement(ve.a,{name:"cross-circle",size:"1x",className:"error"}))))),R.a.createElement("div",null,r)}}]),t}(R.a.Component);He.propTypes={indent:R.a.PropTypes.number.isRequired},He.defaultProps={indent:0};var Ue=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),Ye(t,[{key:"render",value:function(){var e=this.props,t=e.requiredPermissions,a=e.available,n=e.availableKeys,r=(e.type,[]);return t.forEach(function(e){r.push(R.a.createElement(Xe,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n}))}),R.a.createElement("div",null,r)}}]),t}(R.a.Component),Ve=function(e){function t(){h(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={requiredPermissions:[]},e._updateState=e._updateState.bind(e),e}return b(t,e),Ye(t,[{key:"componentWillMount",value:function(){this._updateState(),G.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){G.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=Me.listToIDs(this.props.required),t=Me.listToIDs(this.props.available);this.setState({requiredPermissions:Me.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this.props,t=e.type,a=(e.proposal,e.added),n=e.removed,r=e.availableKeys,o=this.state,s=o.requiredPermissions,i=o.required,l=o.available;return l=Object(We.cloneDeep)(l),r=r.toJS(),a&&(l.push(a),r.push(a)),n&&(-1!==l.indexOf(n)&&l.splice(l.indexOf(n),1),-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1)),R.a.createElement(Ue,{type:t,added:a,removed:n,required:i,available:l,availableKeys:r,requiredPermissions:s})}}]),t}(R.a.Component);Ve.propTypes={required:X.a.ChainAccountsList,available:X.a.ChainAccountsList},Ve.defaultProps={type:"active",added:null,removed:null},Ve=Object(H.a)(Ve,{keep_updating:!0});var Ke=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),Ye(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get("available_"+a+"_approvals"),r=t.get("available_key_approvals"),o=t.get("required_"+a+"_approvals");return R.a.createElement(Ve,Fe({},this.props,{required:o,available:n,availableKeys:r}))}}]),t}(R.a.Component);Ke.propTypes={proposal:X.a.ChainObject.isRequired,type:R.a.PropTypes.string.isRequired},Ke.defaultProps={type:"active",added:null};var ze=Object(H.a)(Ke,{keep_updating:!0}),Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Qe=function(e){function t(e){g(this,t);var a=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return _(t,e),Ge(t,[{key:"onActiveAccount",value:function(e,t,a,n){var r={};t[n]?(r.key=n,r[a]=null):n?(r[a]=e[n],r.key=null):(r[a]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,a=e.toJS(),n=this.state,r=n.active,o=(n.key,n.owner,n.payee),s={fee_paying_account:o||r,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]},i="approve"===this.props.action,l=[];["active","owner","key"].forEach(function(e){var n=t.state[e];if(n){var r=-1!==a["available_"+e+"_approvals"].indexOf(n);(i&&!r||!i&&r)&&("approve"===t.props.action?(s[e+"_approvals_to_add"]=[n],"key"===e&&l.push(n)):"reject"===t.props.action&&(s[e+"_approvals_to_remove"]=[n],"key"===e&&l.push(n)))}});var c=V.a.new_transaction();c.add_type_operation("proposal_update",s),K.a.process_transaction(c,null,!0,l),Y.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=G.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){Y.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],r={},o="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(o?e&&!t.get("available_"+a+"_approvals").includes(e.get("id")):e&&t.get("available_"+a+"_approvals").includes(e.get("id")))&&(r[e.get("name")]=e.get("id"),n.push(e.get("name")))});var s=[],i={};this.props.keys.length&&this.props.keys.forEach(function(e){De.a.isMyKey(e)&&!t.get("available_key_approvals").includes(e)&&(i[e]=!0,s.push(e))});var l=De.a.getMyAccounts();return R.a.createElement("form",{className:"grid-block vertical full-width-content"},R.a.createElement("div",{className:"grid-container"},R.a.createElement("div",{className:"content-block"},R.a.createElement("h4",null,o?"Add approval":"Remove approval")),R.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},R.a.createElement(ze,{proposal:t.get("id"),type:a,added:o?this.state.key?this.state.key:this.state[a]||null:null,removed:o?null:this.state.key?this.state.key:this.state[a]||null})),R.a.createElement("div",{className:"content-block full-width-content"},R.a.createElement("div",{className:"full-width-content form-group"},R.a.createElement(I.a,{content:"modal.proposals.pay_with",component:"label"}),R.a.createElement(Re.a,{account_names:l,onChange:this.onChangePayee.bind(this)})),n.length||s.length?R.a.createElement("div",{className:"full-width-content form-group"},R.a.createElement(I.a,{content:"modal.proposals.approval_"+(o?"add":"remove"),component:"label"}),R.a.createElement(Re.a,{account_names:n.concat(s),onChange:this.onActiveAccount.bind(this,r,i,a)})):null,null),R.a.createElement("div",{className:"content-block"},R.a.createElement("input",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t),value:o?"Approve":"Remove"}),R.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},R.a.createElement(I.a,{content:"account.perm.cancel"})))))}}]),t}(R.a.Component);Qe.propTypes={accounts:X.a.ChainAccountsList},Qe=Object(H.a)(Qe);var $e=function(e){function t(){g(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return _(t,e),Ge(t,[{key:"componentWillMount",value:function(){this._updateState(),G.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){G.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get("required_active_approvals").size?"active":"owner"),n=Me.listToIDs(t.get("required_"+a+"_approvals")),r=Me.listToIDs(t.get("available_"+a+"_approvals")),o=Me.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:Me.unnest(n,a),available:r,availableKeys:o,type:a})}},{key:"render",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,r=t.availableKeys,o=t.type,s=[];a.forEach(function(e){s=s.concat(e.getMissingSigs(n))});var i=[];return a.forEach(function(e){i=i.concat(e.getMissingKeys(r))}),R.a.createElement(Qe,Je({},this.props,{type:o,accounts:"approve"===e?s:n,keys:"approve"===e?i:r}))}}]),t}(R.a.Component);$e.propTypes={account:X.a.ChainAccount.isRequired,proposal:X.a.ChainObject.isRequired},$e=Object(H.a)($e);var Ze=function(e){function t(){g(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return _(t,e),Ge(t,[{key:"componentDidMount",value:function(){var e=this;Y.a.subscribe(this.props.modalId,function(t,a){e.setState({open:"open"===a})})}},{key:"show",value:function(){Y.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return R.a.createElement(B.a,{id:t,overlay:!0,ref:t},this.state.open?R.a.createElement("div",{className:"grid-block vertical"},R.a.createElement($e,this.props)):null)}}]),t}(R.a.Component),et=Ze,tt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),at=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),tt(t,[{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canApprove",value:function(e,t){return-1!==e.required_active_approvals.indexOf(t)&&-1===e.available_active_approvals.indexOf(t)||-1!==e.required_owner_approvals.indexOf(t)&&-1===e.available_owner_approvals.indexOf(t)}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var n=G.b.getObject(e);if(n){var r=n.get("proposed_transaction"),o=r.get("operations");a.push({operations:o,account:t,proposal:n})}});var n=a.sort(function(e,t){return U.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).map(function(t){var a=!1,n=t.operations.map(function(e,n){return"1.2.153124"===e.getIn([1,"to"])&&(a=!0),R.a.createElement(je.a,{key:t.proposal.get("id")+"_"+n,expiration:t.proposal.get("expiration_time"),index:n,op:e.toJS(),inverted:!1,hideFee:!1,hideOpLabel:!0,hideDate:!0,proposal:!0,id:t.proposal.get("id")})}).toArray(),r=e._canReject(t.proposal.toJS()),o=t.proposal.get("id"),s=t.proposal.get("required_active_approvals").size?"active":"owner";return R.a.createElement("tr",{key:o},R.a.createElement("td",null,n),R.a.createElement("td",null,R.a.createElement(ze,{proposal:t.proposal.get("id"),type:s})),R.a.createElement("td",null,r?R.a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"reject"),className:"button outline"},R.a.createElement(I.a,{content:"proposal.reject"})):null,R.a.createElement(et,{ref:o+"_reject",modalId:o+"_reject",account:t.account.get("id"),proposal:o,action:"reject"}),a?R.a.createElement("div",{"data-tip":J.a.translate("tooltip.propose_scam"),className:" tooltip has-error"},"SCAM"):R.a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"approve"),className:"button outline"},R.a.createElement("span",null,R.a.createElement(I.a,{content:"proposal.approve"}))),R.a.createElement(et,{ref:o+"_approve",modalId:o+"_approve",account:t.account.get("id"),proposal:o,action:"approve"})))});return R.a.createElement("table",{className:"table compact "+this.props.className},R.a.createElement("thead",null,R.a.createElement("tr",null,R.a.createElement("th",null,R.a.createElement(I.a,{content:"account.votes.info"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"proposal.status"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"proposal.action"})))),R.a.createElement("tbody",null,n))}}]),t}(j.Component);at.propTypes={account:X.a.ChainAccount.isRequired};var nt=Object(H.a)(at,{keep_updating:!0}),rt=a(27),ot=a(282),st=a(679),it=a(150),lt=a(691),ct=a(1599),ut=a(1600),pt=a(8),dt=a(292),mt=a(1513),ht=a(1598),ft=a(279),bt=a(141),gt=a(38),vt=a(125),_t=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),yt=function(e){function t(e){O(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:""},a}return C(t,e),_t(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var a=G.b.getObject(t).toJS(),n=G.b.getAsset(a.sell_price.base.asset_id),r=G.b.getAsset(a.sell_price.quote.asset_id),o=n.get("symbol").toLowerCase(),s=r.get("symbol").toLowerCase();return o.indexOf(e)>-1||s.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),ft.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;ft.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),rt.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,r=this.state,o=r.filterValue,s=r.selectedOrders,i=J.a.translate("account.perm.cancel"),l={},c={};if(!a.get("orders"))return null;var u=a.get("orders"),p=u.size;o&&(u=this._getFilteredOrders.call(this)),u.forEach(function(t){var a=G.b.getObject(t).toJS(),r=G.b.getAsset(a.sell_price.base.asset_id),o=G.b.getAsset(a.sell_price.quote.asset_id);if(r&&o){var s,u=(s={},k(s,r.get("id"),{precision:r.get("precision")}),k(s,o.get("id"),{precision:o.get("precision")}),s),p=vt.a.getMarketID(r,o),d=p.marketID,m=n.get(d);l[d]||(l[d]=m?{base:{id:r.get("id"),symbol:r.get("symbol"),precision:r.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}}:{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:r.get("id"),symbol:r.get("symbol"),precision:r.get("precision")}});var h=new bt.d(a,u,l[d].quote.id),f=G.b.getAsset(l[d].base.id),b=G.b.getAsset(l[d].quote.id);c[d]||(c[d]=[]),c[d].push(R.a.createElement(ht.b,{ref:l[d].base.symbol,key:a.id,order:h,base:f,quote:b,cancel_text:i,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:h.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,d),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var d=[],m=0;for(var h in c)c[h].length&&(d.push(R.a.createElement("tbody",{key:h},c[h].sort(function(e,t){return e.props.price-t.props.price}))),m++);return R.a.createElement("div",{className:"grid-content no-overflow no-padding",style:{paddingBottom:15}},R.a.createElement("div",{style:{maxWidth:"50%",marginBottom:"1em"}},u&&p?R.a.createElement("input",{type:"text",placeholder:J.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,s.length?R.a.createElement("button",{className:"button"},R.a.createElement(I.a,{content:"account.reset_orders",onClick:this.resetSelected.bind(this)})):null,s.length?R.a.createElement("button",{className:"button"},R.a.createElement(I.a,{content:"account.submit_orders",onClick:this.cancelSelected.bind(this)})):null),R.a.createElement("table",{className:"table table-striped dashboard-table table-hover"},R.a.createElement(ht.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),d,this.props.children))}}]),t}(R.a.Component);yt=Object(re.connect)(yt,{listenTo:function(){return[gt.a]},getProps:function(){return{marketDirections:gt.a.getState().marketDirections}}});var Et=yt,wt=a(29),kt=a.n(wt),Ot=a(690),At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ct=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Nt=function(e){function t(e){T(this,t);var a=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.sortFunctions={alphabetic:function(e,t,a){return e.key>t.key?this.state.sortDirection||a?1:-1:e.key<t.key?this.state.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];if(a&&n){var r=a.getFinalPrice(!0),o=n.getFinalPrice(!0);return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?r-o:o-r:this.sortFunctions.alphabetic(e,t,!0)}},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue();return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?o-r:r-o:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue(),s="NaN"!=parseFloat(r)?parseFloat(r):r,i="NaN"!=parseFloat(o)?parseFloat(o):o;return void 0===this.state.sortDirection||this.state.sortDirection?s-i:i-s}}},a.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",showHidden:!1,depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["BTS"]},a.priceRefs={},a.valueRefs={},a.changeRefs={};for(var n in a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a}return x(t,e),Ct(t,[{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;N((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!(U.a.are_equal_shallow(e.balanceAssets,this.props.balanceAssets)&&U.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)&&U.a.are_equal_shallow(e.balances,this.props.balances)&&e.account===this.props.account&&e.settings===this.props.settings&&e.hiddenAssets===this.props.hiddenAssets&&U.a.are_equal_shallow(t,this.state))}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){rt.a.hideAsset(e,t)}},{key:"_showDepositModal",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.refs.deposit_modal_new.show()})}},{key:"_showDepositWithdraw",value:function(e,t,a,n){var r,o=this;n.preventDefault(),this.setState((r={},S(r,"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),S(r,"fiatModal",a),r),function(){o.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?R.a.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.refs.send_modal.show()})}},{key:"_renderBalances",value:function(e,t,a){var n=this,r=this.props.core_asset,o=this.props,s=o.settings,i=o.hiddenAssets,l=o.orders,c=s.get("unit")||r.get("symbol"),u=s.get("showAssetPercent",!1),p=function(e,t){var a=e&&e.has("bitasset_data_id"),r="cp_modal_"+e.get("id");return{isBitAsset:a,borrowModal:a?R.a.createElement(ge.a,{ref:r,quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:a?R.a.createElement("a",{onClick:function(){ie.a.hide(),n.refs[r].show()}},R.a.createElement(ve.a,{name:"dollar",className:"icon-14px"})):null}},d=[];return e.forEach(function(e){var t=G.b.getObject(e),a=t.get("asset_type"),o=G.b.getObject(a),s=void 0,m=void 0,h=void 0,f="";if(!o)return null;var b=o.get("symbol"),g="1.3.0"!==o.get("id"),v=c!==r.get("symbol"),_=ot.a.parseDescription(o.getIn(["options","description"])),y=_.market;f=o.get("symbol"),-1===f.indexOf("OPEN.")||y||(y="USD");var E=y||c;g&&E===f&&(E=r.get("symbol")),s=g?R.a.createElement(_e.b,{to:"/market/"+o.get("symbol")+"_"+E},R.a.createElement(ve.a,{name:"trade",className:"icon-14px"})):v?R.a.createElement(_e.b,{to:"/market/"+o.get("symbol")+"_"+c},R.a.createElement(ve.a,{name:"trade",className:"icon-14px"})):"-",h=R.a.createElement("a",{onClick:n.triggerSend.bind(n,o.get("id"))},R.a.createElement(ve.a,{name:"transfer",className:"icon-14px"}));var w=p(o,n.props.account),k=w.isBitAsset,O=w.borrowModal,A=w.borrowLink;m=R.a.createElement("a",{href:!0,onClick:n._onSettleAsset.bind(n,o.get("id"))},R.a.createElement(ve.a,{name:"settle",className:"icon-14px"}));var C=!i.includes(a),N=!!t.get("balance"),S=!!l[a],T=o.get("symbol").split("."),P=("OPEN"==T[0]||"RUDEX"==T[0])&&!!n.props.backedCoins.get("OPEN",[]).find(function(e){return e.backingCoinType===T[1]})||!!n.props.backedCoins.get("RUDEX",[]).find(function(e){return e.backingCoin===T[1]})||"BTS"==o.get("symbol"),x=!!n.props.backedCoins.get("OPEN",[]).find(function(e){return e.symbol===o.get("symbol")}),j=x&&N&&0!=t.get("balance"),D=!!n.props.bridgeCoins.get(f);d.push(R.a.createElement("tr",{key:o.get("symbol"),style:{maxWidth:"100rem"}},R.a.createElement("td",{style:{textAlign:"left"}},R.a.createElement(it.a,{asset:o.get("id")})),R.a.createElement("td",{style:{textAlign:"right"}},N||S?R.a.createElement(M.a,{balance:e,hide_asset:!0}):null),R.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},R.a.createElement(st.b,{refCallback:function(e){e&&e.refs.bound_component&&(n.priceRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),hide_symbols:!0})),R.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},R.a.createElement(me,{refCallback:function(e){e&&e.refs.bound_component&&(n.changeRefs[o.get("symbol")]=e.refs.bound_component)},base:o.get("id"),quote:c,marketId:o.get("symbol")+"_"+c,hide_symbols:!0})),R.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},N||S?R.a.createElement(ae.a,{balance:e,toAsset:c,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(n.valueRefs[o.get("symbol")]=e.refs.bound_component)}}):null),u?R.a.createElement("td",{style:{textAlign:"right"}},N?R.a.createElement(M.a,{balance:e,asPercentage:!0}):null):null,R.a.createElement("td",null,h),R.a.createElement("td",null,D&&n.props.isMyAccount?R.a.createElement("span",null,R.a.createElement("a",{onClick:n._showDepositWithdraw.bind(n,"bridge_modal",b,!1)},R.a.createElement(ve.a,{name:"dollar",className:"icon-14px"}))):"-"),R.a.createElement("td",null,P&&n.props.isMyAccount?R.a.createElement("span",null,R.a.createElement(ve.a,{style:{cursor:"pointer"},name:"deposit",className:"icon-14x",onClick:n._showDepositModal.bind(n,b)})):"-"),R.a.createElement("td",null,j&&n.props.isMyAccount?R.a.createElement("span",null,R.a.createElement("a",{className:j?"":"disabled",onClick:j?n._showDepositWithdraw.bind(n,"withdraw_modal",b,!1):function(){}},R.a.createElement(ve.a,{name:"withdraw",className:"icon-14px"}))):"-"),R.a.createElement("td",null,s),R.a.createElement("td",null,k?R.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":J.a.translate("tooltip.borrow",{asset:f})},A,O):"-"),R.a.createElement("td",null,k?R.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":J.a.translate("tooltip.settle",{asset:f})},m):"-"),R.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":J.a.translate("tooltip."+(C?"hide_asset":"show_asset"))},R.a.createElement("a",{style:{marginRight:0},className:C?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,a,C)},R.a.createElement(ve.a,{name:C?"cross-circle":"plus-circle",className:"icon-14px"})))))}),t&&t.filter(function(e){var t=!1;n.props.backedCoins.get("OPEN",[]).forEach(function(a){a&&a.symbol===e&&(t=!0)}),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return d.forEach(function(t){t.key===e&&(a=!1)}),a&&t}).forEach(function(e){var t=G.b.getAsset(e);if(t&&n.props.isMyAccount){var o=!i.includes(t.get("id")),s=t.get("symbol").split("."),l=!!n.props.backedCoins.get("OPEN",[]).find(function(e){return e.backingCoinType===s[1]})||!!n.props.backedCoins.get("RUDEX",[]).find(function(e){return e.backingCoin===s[1]})||"BTS"==t.get("symbol"),c=!!n.props.bridgeCoins.get(t.get("symbol")),u="1.3.0"!==t.get("id"),m=ot.a.parseDescription(t.getIn(["options","description"])),h=m.market;-1===t.get("symbol").indexOf("OPEN.")||h||(h="USD");var f=h||(r?r.get("symbol"):"BTS"),b=u?R.a.createElement(_e.b,{to:"/market/"+t.get("symbol")+"_"+f},R.a.createElement(ve.a,{name:"trade",className:"icon-14px"})):"-",g=p(t,n.props.account),v=g.isBitAsset,_=g.borrowModal,y=g.borrowLink;(o&&a||!o&&!a)&&d.push(R.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},R.a.createElement("td",{style:{textAlign:"left"}},R.a.createElement(it.a,{asset:t.get("id")})),R.a.createElement("td",null,"-"),R.a.createElement("td",{className:"column-hide-small"},"-"),R.a.createElement("td",{className:"column-hide-small"},"-"),R.a.createElement("td",{className:"column-hide-small"},"-"),R.a.createElement("td",null,"-"),R.a.createElement("td",{style:{textAlign:"center"}},c&&n.props.isMyAccount?R.a.createElement("span",null,R.a.createElement("a",{onClick:n._showDepositWithdraw.bind(n,"bridge_modal",e,!1)},R.a.createElement(ve.a,{name:"dollar",className:"icon-14px"}))):"-"),R.a.createElement("td",null,l&&n.props.isMyAccount?R.a.createElement("span",null,R.a.createElement(ve.a,{style:{cursor:"pointer"},name:"deposit",className:"icon-14x",onClick:n._showDepositModal.bind(n,t.get("symbol"))})):"-"),R.a.createElement("td",null,"-"),R.a.createElement("td",{style:{textAlign:"center"}},b),R.a.createElement("td",null,v?R.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":J.a.translate("tooltip.borrow",{asset:t.get("symbol")})},y,_):"-"),R.a.createElement("td",null,"-"),R.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":J.a.translate("tooltip."+(o?"hide_asset":"show_asset"))},R.a.createElement("a",{style:{marginRight:0},className:o?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,t.get("id"),o)},R.a.createElement(ve.a,{name:o?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),d.sort(this.sortFunctions[this.state.sortKey]),d}},{key:"_toggleHiddenAssets",value:function(){this.setState({showHidden:!this.state.showHidden})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(rt.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(rt.a.changeViewSetting({portfolioSort:e}),this.setState({sortKey:e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,r=t.settings,o=t.orders,s=this.state.showHidden;if(!a)return null;var i=[],l={},c={};a.toJS&&a.has("call_orders")&&(i=a.get("call_orders").toJS());var u=void 0,p=void 0,d=a.get("balances"),m=L.a.List(),h=L.a.List();if(i.forEach(function(e){var t=G.b.getObject(e);if(t){var a=t.getIn(["call_price","base","asset_id"]);l[a]?l[a]+=parseInt(t.get("collateral"),10):l[a]=parseInt(t.get("collateral"),10);var n=t.getIn(["call_price","quote","asset_id"]);c[n]?c[n]+=parseInt(t.get("debt"),10):c[n]=parseInt(t.get("debt"),10)}}),d){d=d.filter(function(e,t){var a=G.b.getObject(e);return!(a&&!a.get("balance")&&!o[t])}),d.forEach(function(e,t){n.includes(t)?h=h.push(e):m=m.push(e)});u=this._renderBalances(m,this.state.alwaysShowAssets,!0);p=this._renderBalances(h,this.state.alwaysShowAssets)}var f=m.concat(h),b=R.a.createElement(W.a,{noTip:!0,balances:f,hide_asset:!0}),g=R.a.createElement(W.a,{noTip:!0,balances:L.a.List(),openOrders:o,hide_asset:!0}),v=R.a.createElement(W.a,{noTip:!0,balances:L.a.List(),debt:c,collateral:l,hide_asset:!0}),_=R.a.createElement(W.a,{noTip:!0,balances:L.a.List(),debt:c,hide_asset:!0}),y=R.a.createElement(W.a,{noTip:!0,balances:L.a.List(),collateral:l,hide_asset:!0}),E=r.get("unit")||this.props.core_asset.get("symbol"),w=R.a.createElement(ye.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:E,arg:"asset"}]});u.push(R.a.createElement("tr",{key:"portfolio",className:"total-value"},R.a.createElement("td",{style:{textAlign:"left"}},w),R.a.createElement("td",null),R.a.createElement("td",{className:"column-hide-small"}),R.a.createElement("td",null),R.a.createElement("td",{className:"column-hide-small",style:{textAlign:"right"}},b),R.a.createElement("td",{colSpan:"9"})));var k=r.get("showAssetPercent",!1),O=this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset})||{},A=this.props.bridgeCoins.get(this.state.bridgeAsset)||null,C=G.b.getAsset(E),N=C?C.get("symbol"):"";if(C){var S=U.a.replaceName(N,!!C.get("bitasset_data_id")),T=S.prefix,P=S.name;N=(T||"")+P}var x=R.a.createElement("span",{style:{visibility:"hidden"}},"H");return R.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},R.a.createElement("div",{className:"content-block small-12"},R.a.createElement("div",{className:"tabs-container generic-bordered-box"},R.a.createElement(mt.b,{defaultActiveTab:0,segmented:!1,setting:"overviewTab",className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block"},R.a.createElement(mt.a,{title:"account.portfolio",subText:b},R.a.createElement("div",{className:"hide-selector"},R.a.createElement("div",{className:kt()("inline-block",{inactive:s&&p.length}),onClick:s?this._toggleHiddenAssets.bind(this):function(){}},R.a.createElement(I.a,{content:"account.hide_hidden"})),p.length?R.a.createElement("div",{className:kt()("inline-block",{inactive:!s}),onClick:s?function(){}:this._toggleHiddenAssets.bind(this)},R.a.createElement(I.a,{content:"account.show_hidden"})):null,R.a.createElement(Ot.a,{id:"send_modal_portfolio",ref:"send_modal",from_name:this.props.account.get("name"),asset_id:this.state.send_asset||"1.3.0"})),R.a.createElement("table",{className:"table dashboard-table table-hover"},R.a.createElement("thead",null,R.a.createElement("tr",null,R.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},R.a.createElement(I.a,{component:"span",content:"account.asset"})),R.a.createElement("th",{style:{textAlign:"right"}},R.a.createElement(I.a,{content:"account.qty"})),R.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},R.a.createElement(I.a,{content:"exchange.price"})," (",R.a.createElement(he.a,{name:E}),")"),R.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},R.a.createElement(I.a,{content:"account.hour_24_short"})),R.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},R.a.createElement(ye.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:E,arg:"asset"}]})),k?R.a.createElement("th",{style:{textAlign:"right"}},R.a.createElement(I.a,{component:"span",content:"account.percent"})):null,R.a.createElement("th",null,R.a.createElement(I.a,{content:"header.payments"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"exchange.buy"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"modal.deposit.submit"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"modal.withdraw.submit"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"account.trade"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"exchange.borrow"})),R.a.createElement("th",null,R.a.createElement(I.a,{content:"account.settle"})),R.a.createElement("th",{className:"column-hide-small"},R.a.createElement(I.a,{content:s?"account.perm.show":"exchange.hide"})))),R.a.createElement("tbody",null,s&&p.length?p:u))),R.a.createElement(mt.a,{title:"account.open_orders",subText:g},R.a.createElement(Et,this.props,R.a.createElement("tbody",null,R.a.createElement("tr",{className:"total-value"},R.a.createElement("td",{colSpan:"7",style:{textAlign:"right"}},w),R.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},g),this.props.isMyAccount?R.a.createElement("td",null):null)))),R.a.createElement(mt.a,{title:"account.collaterals",subText:R.a.createElement("span",{className:this.state.globalMarginStatus},v)},R.a.createElement("div",{className:"content-block"},R.a.createElement("div",{className:"generic-bordered-box"},R.a.createElement(Pe,{preferredUnit:E,className:"dashboard-table",callOrders:i,account:a},R.a.createElement("tr",{className:"total-value"},R.a.createElement("td",null,w),R.a.createElement("td",null),R.a.createElement("td",null,_),R.a.createElement("td",{className:"column-hide-medium"},y),R.a.createElement("td",null),R.a.createElement("td",null,v),R.a.createElement("td",{className:"column-hide-small"}),R.a.createElement("td",{className:"column-hide-small"}),R.a.createElement("td",{colSpan:"3"})))))),R.a.createElement(mt.a,{title:"account.activity",subText:x},R.a.createElement(xe.a,{accountsList:L.a.fromJS([a.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),a.get("proposals")&&a.get("proposals").size?R.a.createElement(mt.a,{title:"explorer.proposals.title",subText:a.get("proposals")?a.get("proposals").size:0},R.a.createElement(nt,{className:"dashboard-table",account:a.get("id")})):null),R.a.createElement(te,{ref:"settlement_modal",asset:this.state.settleAsset,account:a.get("name")}))),R.a.createElement(ct.a,At({ref:"withdraw_modal",action:"withdraw",fiatModal:this.state.fiatModal,account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.withdrawAsset,modalId:"simple_withdraw_modal",balances:this.props.balances},O,{isDown:this.props.gatewayDown.get("OPEN")})),R.a.createElement(lt.a,{ref:"deposit_modal_new",modalId:"deposit_modal_new",asset:this.state.depositAsset,account:this.props.account.get("name"),backedCoins:this.props.backedCoins}),R.a.createElement(ut.a,{ref:"bridge_modal",action:"deposit",account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.bridgeAsset,modalId:"simple_bridge_modal",balances:this.props.balances,bridges:A,isDown:this.props.gatewayDown.get("TRADE")}))}}]),t}(R.a.Component);Nt.propTypes={balanceAssets:X.a.ChainAssetsList,core_asset:X.a.ChainAsset.isRequired},Nt.defaultProps={core_asset:"1.3.0"},Nt=Object(H.a)(Nt);var St=function(e){function t(){return T(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,e),Ct(t,[{key:"componentWillMount",value:function(){"4018d784"===pt.Apis.instance().chain_id.substr(0,8)&&(dt.a.fetchCoins(),dt.a.fetchBridgeCoins())}},{key:"render",value:function(){var e=this.props.balances.map(function(e){return e&&e.get("asset_type")}).filter(function(e){return!!e}),t=this.props.orders.reduce(function(e,t){var a=t.getIn(["sell_price","base","asset_id"]);return e[a]||(e[a]=0),e[a]+=parseInt(t.get("for_sale"),10),e},{});for(var a in t)-1===e.indexOf(a)&&e.push(a);return R.a.createElement(Nt,At({},this.state,this.props,{orders:t,balanceAssets:L.a.List(e)}))}}]),t}(R.a.Component);St.propTypes={balances:X.a.ChainObjectsList,orders:X.a.ChainObjectsList},St.defaultProps={balances:L.a.List(),orders:L.a.List()};t.default=Object(H.a)(St)}});
//# sourceMappingURL=7.js.map